"use strict";(self.webpackChunkrts_docs_dev=self.webpackChunkrts_docs_dev||[]).push([["3801"],{3580(e,n,s){s.r(n),s.d(n,{metadata:()=>t,default:()=>h,frontMatter:()=>o,contentTitle:()=>c,toc:()=>a,assets:()=>l});var t=JSON.parse('{"id":"hpc/storage/sharing_data_on_hpc","title":"Sharing Data on HPC","description":"Introduction","source":"@site/docs/hpc/03_storage/08_sharing_data_on_hpc.mdx","sourceDirName":"hpc/03_storage","slug":"/hpc/storage/sharing_data_on_hpc","permalink":"/pr-preview/pr-254/docs/hpc/storage/sharing_data_on_hpc","draft":false,"unlisted":false,"editUrl":"https://github.com/NYU-RTS/rts-docs/blob/main/docs/hpc/03_storage/08_sharing_data_on_hpc.mdx","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{},"sidebar":"hpcSidebar","previous":{"title":"Transferring Cloud Storage Data with rclone","permalink":"/pr-preview/pr-254/docs/hpc/storage/transferring_cloud_storage_data_with_rclone"},"next":{"title":"Datasets Available","permalink":"/pr-preview/pr-254/docs/hpc/datasets/intro"}}'),r=s(35656),i=s(75395);let o={},c="Sharing Data on HPC",l={},a=[{value:"Introduction",id:"introduction",level:2},{value:"Anatomy of an Access Control Entry",id:"anatomy-of-an-access-control-entry",level:3},{value:"Creating and Applying ACLs",id:"creating-and-applying-acls",level:3},{value:"Give someone access to read a particular file",id:"give-someone-access-to-read-a-particular-file",level:4},{value:"Show current access properties",id:"show-current-access-properties",level:4}];function d(e){let n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"sharing-data-on-hpc",children:"Sharing Data on HPC"})}),"\n",(0,r.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,r.jsx)(n.p,{children:"To share files on the cluster with other users, we recommend using NFSv4 Access Control Lists (ACL) for a user to share access to their data with others. NFSv4 ACL mechanism allows for fine-grained control access to any files by any users or groups of users."}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsxs)(n.p,{children:["We discourage users from setting ",(0,r.jsx)(n.code,{children:"777"})," permissions with ",(0,r.jsx)(n.code,{children:"chmod"}),", because this can lead to data loss (by a malicious user or unintentionally, by accident)."]})}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsx)(n.p,{children:"Torch supports NFSv4 ACLs rather than the POSIX ACLs supported by Greene! NFSv4 ACLs allow for more fine grained control when compared to POSIX ACLs."})}),"\n",(0,r.jsx)(n.h3,{id:"anatomy-of-an-access-control-entry",children:"Anatomy of an Access Control Entry"}),"\n",(0,r.jsx)(n.p,{children:"An Access Control List is composed of Access Control Entries, each of which has the following structure:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"[type]:[flags]:[principal]:[permissions]\n"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Property"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.em,{children:"type"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Kind of ACE entry, we recommend only using A (access). Deny type entries make the ACE more complex to reason about when compared to using only access type entries for the same configuration."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.em,{children:"flags"})}),(0,r.jsxs)(n.td,{style:{textAlign:"left"},children:["Inheritance flags which apply to directories and control how ACEs are inherited:",(0,r.jsx)("br",{}),"- ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"f"})}),": files inherit ACEs, but inheritance flags are not set on the files",(0,r.jsx)("br",{}),"- ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"d"})}),": directories inherit both the ACE and the inheritance flags",(0,r.jsx)("br",{}),"- ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"i"})}),": only inherit the inheritance flags, ACEs do not apply to this directory",(0,r.jsx)("br",{}),"- ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"n"})}),": directories only inherit ACEs, not the inheritance flags",(0,r.jsx)("br",{}),"- ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"g"})}),": only used when the principal is a group"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.em,{children:"principal"})}),(0,r.jsxs)(n.td,{style:{textAlign:"left"},children:["The user (identified by ",(0,r.jsx)(n.code,{children:"NetID"}),") or group to apply the ACE to, with the following special principals:",(0,r.jsx)("br",{}),"- ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"OWNER"})}),(0,r.jsx)("br",{}),"- ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"GROUP"})}),(0,r.jsx)("br",{}),"- ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"EVERYONE"})})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.em,{children:"permissions"})}),(0,r.jsxs)(n.td,{style:{textAlign:"left"},children:["The level of access to grant. Aliases for most common uses include: the full set of permission entry types are listed below for reference, with the most commonly used options being:",(0,r.jsx)("br",{}),"- ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"R"})}),": Read, alias for ",(0,r.jsx)(n.code,{children:"rntcy"}),(0,r.jsx)("br",{}),"- ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"W"})}),": Write, alias for ",(0,r.jsx)(n.code,{children:"watTNcCy"}),(0,r.jsx)("br",{}),"- ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"X"})}),": Execute, alias for ",(0,r.jsx)(n.code,{children:"watTNcCy"})," ",(0,r.jsx)("br",{})," The full list of available options can be found ",(0,r.jsx)(n.a,{href:"https://man7.org/linux/man-pages/man5/nfs4_acl.5.html",children:"here"}),"."]})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"creating-and-applying-acls",children:"Creating and Applying ACLs"}),"\n",(0,r.jsx)(n.p,{children:"The following commands are available:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"nfs4_setfacl"})," to set ACEs"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"nfs4_editfacl"})," to edit ACEs"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"nfs4_getfacl"})," to view ACLs\nwith the usage described in the following examples."]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"give-someone-access-to-read-a-particular-file",children:"Give someone access to read a particular file"}),"\n",(0,r.jsx)(n.p,{children:"Append the ACL for that file by adding an ACE via"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'nfs4_setfacl -a "A::NetID:R" filename\n'})}),"\n",(0,r.jsxs)(n.p,{children:["where the ",(0,r.jsx)(n.code,{children:"-a"}),' flag signifies "append". Since inheritance flags are only applicable to directories and the principal is not a group, no flags are needed.']}),"\n",(0,r.jsx)(n.h4,{id:"show-current-access-properties",children:"Show current access properties"}),"\n",(0,r.jsx)(n.p,{children:"Create an empty file and view the default ACEs it:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"~> touch temp\n~> nfs4_getfacl temp \n# file: temp\nA::OWNER@:rwatTnNcy\nA:g:GROUP@:rtncy\nA::EVERYONE@:rtncy\n"})}),"\n",(0,r.jsx)(n.p,{children:"View changes after granting a collaborator read permissions:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'~> nfs4_setfacl -a "A::collaborator-netid:R" temp \n~> nfs4_getfacl temp\n# file: temp\nA::collaborator-netid@hpc.nyu.edu:rtncy\nA::OWNER@:rwatTnNcy\nA:g:GROUP@:rtncy\nA::EVERYONE@:rtncy\n'})}),"\n",(0,r.jsxs)(n.p,{children:["where ",(0,r.jsx)(n.code,{children:"collaborator-netid"})," refers to the ",(0,r.jsx)(n.code,{children:"NetID"})," of your collaborator."]})]})}function h(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},75395(e,n,s){s.d(n,{R:()=>o,x:()=>c});var t=s(57140);let r={},i=t.createContext(r);function o(e){let n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);