<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-hpc/tutorial_intro_hpc/running_parallel_job" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Running a parallel job | Connecting researchers to computational resources.</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-site.example.com/rts-docs-dev/pr-preview/pr-121/img/NYU.svg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-site.example.com/rts-docs-dev/pr-preview/pr-121/img/NYU.svg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-site.example.com/rts-docs-dev/pr-preview/pr-121/docs/hpc/tutorial_intro_hpc/running_parallel_job/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Running a parallel job | Connecting researchers to computational resources."><meta data-rh="true" name="description" content="Questions"><meta data-rh="true" property="og:description" content="Questions"><link data-rh="true" rel="icon" href="/rts-docs-dev/pr-preview/pr-121/img/NYU.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-site.example.com/rts-docs-dev/pr-preview/pr-121/docs/hpc/tutorial_intro_hpc/running_parallel_job/"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/rts-docs-dev/pr-preview/pr-121/docs/hpc/tutorial_intro_hpc/running_parallel_job/" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/rts-docs-dev/pr-preview/pr-121/docs/hpc/tutorial_intro_hpc/running_parallel_job/" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Running a parallel job","item":"https://your-docusaurus-site.example.com/rts-docs-dev/pr-preview/pr-121/docs/hpc/tutorial_intro_hpc/running_parallel_job"}]}</script><link rel="alternate" type="application/rss+xml" href="/rts-docs-dev/pr-preview/pr-121/blog/rss.xml" title="Connecting researchers to computational resources. RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/rts-docs-dev/pr-preview/pr-121/blog/atom.xml" title="Connecting researchers to computational resources. Atom Feed"><link rel="stylesheet" href="/rts-docs-dev/pr-preview/pr-121/assets/css/styles.18084c02.css">
<script src="/rts-docs-dev/pr-preview/pr-121/assets/js/runtime~main.0309cffa.js" defer="defer"></script>
<script src="/rts-docs-dev/pr-preview/pr-121/assets/js/main.efbccf0c.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/rts-docs-dev/pr-preview/pr-121/img/NYU.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_QK_K" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/rts-docs-dev/pr-preview/pr-121/"><div class="navbar__logo"><img src="/rts-docs-dev/pr-preview/pr-121/img/NYU.svg" alt="NYU torch logo" class="themedComponent_qITe themedComponent--light_P7Wy"><img src="/rts-docs-dev/pr-preview/pr-121/img/NYU.svg" alt="NYU torch logo" class="themedComponent_qITe themedComponent--dark_lB6v"></div><b class="navbar__title text--truncate">Research Technology Services</b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/rts-docs-dev/pr-preview/pr-121/docs/genai/getting_started/intro/">Pythia</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rts-docs-dev/pr-preview/pr-121/docs/hpc/getting_started/intro/">HPC</a><a class="navbar__item navbar__link" href="/rts-docs-dev/pr-preview/pr-121/docs/cloud/intro/">Cloud</a><a class="navbar__item navbar__link" href="/rts-docs-dev/pr-preview/pr-121/docs/srde/getting_started/intro/">SRDE</a><a href="https://hsrn.nyu.edu/docs/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">HSRN<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_S7uf"><use href="#theme-svg-external-link"></use></svg></a><a class="navbar__item navbar__link" href="/rts-docs-dev/pr-preview/pr-121/blog/">Announcements</a><div class="toggle_Epwe colorModeToggle_bc_c"><button class="clean-btn toggleButton_w7AH toggleButtonDisabled_HAH_" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_XvL5 lightToggleIcon_V1T6"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_XvL5 darkToggleIcon_wogB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_XvL5 systemToggleIcon_rTjK"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_linB"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_MITy"><div class="docsWrapper_qr7G"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_F9zA" type="button"></button><div class="docRoot_clrU"><aside class="theme-doc-sidebar-container docSidebarContainer_hWjn"><div class="sidebarViewport_J_uj"><div class="sidebar_nG7m"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_ilEL"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rts-docs-dev/pr-preview/pr-121/docs/hpc/getting_started/intro/">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rts-docs-dev/pr-preview/pr-121/docs/hpc/connecting_to_hpc/connecting_to_hpc/">Setup</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rts-docs-dev/pr-preview/pr-121/docs/hpc/storage/intro_and_data_management/">Storage &amp; Data transfers</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rts-docs-dev/pr-preview/pr-121/docs/hpc/datasets/intro/">Datasets</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rts-docs-dev/pr-preview/pr-121/docs/hpc/submitting_jobs/slurm_submitting_jobs/">Submitting jobs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rts-docs-dev/pr-preview/pr-121/docs/hpc/tools_and_software/intro/">Tools &amp; Software available</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rts-docs-dev/pr-preview/pr-121/docs/hpc/containers/intro/">Containers</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rts-docs-dev/pr-preview/pr-121/docs/hpc/ml_ai_hpc/intro/">ML/AI on HPC</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rts-docs-dev/pr-preview/pr-121/docs/hpc/ood/open_on_demand/">Open OnDemand</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rts-docs-dev/pr-preview/pr-121/docs/hpc/training_and_support/training_at_nyu/">Training and Support</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rts-docs-dev/pr-preview/pr-121/docs/hpc/spec_sheet/">Greene Spec Sheet</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rts-docs-dev/pr-preview/pr-121/docs/hpc/system_status/">Greene System Status</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rts-docs-dev/pr-preview/pr-121/docs/hpc/tutorial_intro_shell_hpc/intro/">Tutorial: Intro to Shell for HPC</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/rts-docs-dev/pr-preview/pr-121/docs/hpc/tutorial_intro_hpc/intro_hpc/">Tutorial: Intro to HPC</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rts-docs-dev/pr-preview/pr-121/docs/hpc/tutorial_intro_hpc/intro_hpc/">Introduction to High-Performance Computing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rts-docs-dev/pr-preview/pr-121/docs/hpc/tutorial_intro_hpc/why_use_cluster/">Why Use a Cluster?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rts-docs-dev/pr-preview/pr-121/docs/hpc/tutorial_intro_hpc/exploring_remote_resources/">Exploring Remote Resources</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rts-docs-dev/pr-preview/pr-121/docs/hpc/tutorial_intro_hpc/scheduler_fundamentals/">Scheduler Fundamentals</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rts-docs-dev/pr-preview/pr-121/docs/hpc/tutorial_intro_hpc/environment_variables/">Environment Variables</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rts-docs-dev/pr-preview/pr-121/docs/hpc/tutorial_intro_hpc/modules/">Accessing software via Modules</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rts-docs-dev/pr-preview/pr-121/docs/hpc/tutorial_intro_hpc/transferring_files_remote/">Transferring files with remote computers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rts-docs-dev/pr-preview/pr-121/docs/hpc/tutorial_intro_hpc/running_parallel_job/">Running a parallel job</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rts-docs-dev/pr-preview/pr-121/docs/hpc/tutorial_intro_hpc/using_resources_effectively/">Using resources effectively</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rts-docs-dev/pr-preview/pr-121/docs/hpc/tutorial_intro_hpc/using_resources_responsibly/">Using shared resources responsibly</a></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_cQ77"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_XMUu"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_v37g"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DbD0"><div class="docItemContainer_vk7o"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_SjX4" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/rts-docs-dev/pr-preview/pr-121/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_u2qz"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Tutorial: Intro to HPC</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Running a parallel job</span></li></ul></nav><div class="tocCollapsible_sUCF theme-doc-toc-mobile tocMobile_nu_L"><button type="button" class="clean-btn tocCollapsibleButton_Fdrn">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Running a parallel job</h1></header>
<div class="theme-admonition theme-admonition-info admonition_Ng6n alert alert--info"><div class="admonitionHeading_h3_P"><span class="admonitionIcon_xiRV"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Overview</div><div class="admonitionContent_oejY"><p>Questions</p><ul>
<li>How do we execute a task in parallel?</li>
<li>What benefits arise from parallel execution?</li>
<li>What are the limits of gains from execution in parallel?</li>
</ul><p>Objectives</p><ul>
<li>Install a Python package using <code>pip</code></li>
<li>Prepare a job submission script for the parallel executable.</li>
<li>Launch jobs with parallel execution.</li>
<li>Record and summarize the timing and accuracy of jobs.</li>
<li>Describe the relationship between job parallelism and performance.</li>
</ul></div></div>
<p>We now have the tools we need to run a multi-processor job. This is a very important aspect of HPC systems, as parallelism is one of the primary tools we have to improve the performance of computational tasks.</p>
<p>If you disconnected, log back in to the cluster.</p>
<div class="language-bash codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-bash codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">user@laptop ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ </span><span class="token function" style="color:hsl(221, 87%, 60%)">ssh</span><span class="token plain"> NetID@greene.hpc.nyu.edu</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_xx5F" id="install-the-amdahl-program">Install the Amdahl Program<a href="#install-the-amdahl-program" class="hash-link" aria-label="Direct link to Install the Amdahl Program" title="Direct link to Install the Amdahl Program">​</a></h2>
<p>With the Amdahl source code on the cluster, we can install it, which will provide access to the amdahl executable.</p>
<p>The Amdahl code has one dependency: <code>mpi4py</code>. Package Installer for Python (pip) will collect <code>mpi4py</code> from the Internet and install it for you, but it needs an active <code>mpi</code> module. Here we will load <code>openmpi/gcc/4.1.6</code> to build <code>mpi4py</code>.</p>
<p>Move into the extracted directory, the use pip, to install it in your (“user”) home directory:</p>
<div class="language-bash codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-bash codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ </span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">cd</span><span class="token plain"> amdahl</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ module load python/intel/3.8.6</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ python </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-m</span><span class="token plain"> venv ./test_venv</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ </span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">source</span><span class="token plain"> ./test_venv/bin/activate</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ module load openmpi/gcc/4.1.6</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ python </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-m</span><span class="token plain"> pip </span><span class="token function" style="color:hsl(221, 87%, 60%)">install</span><span class="token plain"> </span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">Processing /home/NetID/packages/temp/hpc-carpentry-amdahl-46c9b4b</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">Collecting mpi4py</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  Using cached mpi4py-4.0.0.tar.gz </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token number" style="color:hsl(35, 99%, 36%)">464</span><span class="token plain"> kB</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  Installing build dependencies </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">..</span><span class="token plain">. </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">done</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  Getting requirements to build wheel </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">..</span><span class="token plain">. </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">done</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  Installing backend dependencies </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">..</span><span class="token plain">. </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">done</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    Preparing wheel metadata </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">..</span><span class="token plain">. </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">done</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">Building wheels </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> collected packages: amdahl, mpi4py</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  Building wheel </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> amdahl </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">setup.py</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">..</span><span class="token plain">. </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">done</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  Created wheel </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> amdahl: </span><span class="token assign-left variable" style="color:hsl(221, 87%, 60%)">filename</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain">amdahl-0.3.1-py3-none-any.whl </span><span class="token assign-left variable" style="color:hsl(221, 87%, 60%)">size</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token number" style="color:hsl(35, 99%, 36%)">6996</span><span class="token plain"> </span><span class="token assign-left variable" style="color:hsl(221, 87%, 60%)">sha256</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain">13a95c3e6fbc53fde1c90a4a9bbb3fd3179d5e3afa3e19b4131a05d9ac798981</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  Stored </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">in</span><span class="token plain"> directory: /home/NetID/.cache/pip/wheels/2c/53/fc/19c3053b3a1d3625ac26158b28f263783f66ec258df97aefcf</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  Building wheel </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> mpi4py </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">PEP </span><span class="token number" style="color:hsl(35, 99%, 36%)">517</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">..</span><span class="token plain">. </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">done</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  Created wheel </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> mpi4py: </span><span class="token assign-left variable" style="color:hsl(221, 87%, 60%)">filename</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain">mpi4py-4.0.0-cp38-cp38-linux_x86_64.whl </span><span class="token assign-left variable" style="color:hsl(221, 87%, 60%)">size</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token number" style="color:hsl(35, 99%, 36%)">5169079</span><span class="token plain"> </span><span class="token assign-left variable" style="color:hsl(221, 87%, 60%)">sha256</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain">9afceb56e22608a7de33442a60bbde3cbd4aa06947d48de5f6dc63932d34bc9f</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  Stored </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">in</span><span class="token plain"> directory: /home/NetID/.cache/pip/wheels/31/3b/6f/dc579e9ff3e2273078596b0cbc1e8d6cbf5a3a05cfad4a380a</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">Successfully built amdahl mpi4py</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">Installing collected packages: mpi4py, amdahl</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">Successfully installed amdahl-0.3.1 mpi4py-4.0.0</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">WARNING: You are using pip version </span><span class="token number" style="color:hsl(35, 99%, 36%)">20.2</span><span class="token plain">.3</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"> however, version </span><span class="token number" style="color:hsl(35, 99%, 36%)">24.2</span><span class="token plain"> is available.</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">You should consider upgrading via the </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;/home/NetID/packages/temp/hpc-carpentry-amdahl-46c9b4b/test_venv/bin/python3 -m pip install --upgrade pip&#x27;</span><span class="token plain"> command.</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-note admonition_Ng6n alert alert--secondary"><div class="admonitionHeading_h3_P"><span class="admonitionIcon_xiRV"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Amdahl is Python Code</div><div class="admonitionContent_oejY"><p>The Amdahl program is written in Python, and installing or using it requires locating the python executable on the login node.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_xx5F" id="help">Help!<a href="#help" class="hash-link" aria-label="Direct link to Help!" title="Direct link to Help!">​</a></h2>
<p>Many command-line programs include a “help” message. Try it with <code>amdahl</code>:</p>
<div class="language-bash codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-bash codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ amdahl </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--help</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">usage: amdahl </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">-h</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">-p </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">PARALLEL_PROPORTION</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">-w </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">WORK_SECONDS</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">-t</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">-e</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">-j </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">JITTER_PROPORTION</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">optional arguments:</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  -h, </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--help</span><span class="token plain">            show this </span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">help</span><span class="token plain"> message and </span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">exit</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-p</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">PARALLEL_PROPORTION</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">, --parallel-proportion </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">PARALLEL_PROPORTION</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                        Parallel proportion: a float between </span><span class="token number" style="color:hsl(35, 99%, 36%)">0</span><span class="token plain"> and </span><span class="token number" style="color:hsl(35, 99%, 36%)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-w</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">WORK_SECONDS</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">, --work-seconds </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">WORK_SECONDS</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                        Total seconds of workload: an integer greater than </span><span class="token number" style="color:hsl(35, 99%, 36%)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  -t, </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--terse</span><span class="token plain">           Format output as a machine-readable object </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> easier analysis</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  -e, </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--exact</span><span class="token plain">           Exactly match requested timing by disabling random jitter</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-j</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">JITTER_PROPORTION</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">, --jitter-proportion </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">JITTER_PROPORTION</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">                        Random jitter: a float between </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-1</span><span class="token plain"> and +1</span><br></span></code></pre></div></div>
<p>This message doesn’t tell us much about what the program does, but it does tell us the important flags we might want to use when launching it.</p>
<h2 class="anchor anchorWithStickyNavbar_xx5F" id="running-the-job-on-a-compute-node">Running the Job on a Compute Node<a href="#running-the-job-on-a-compute-node" class="hash-link" aria-label="Direct link to Running the Job on a Compute Node" title="Direct link to Running the Job on a Compute Node">​</a></h2>
<p>Create a submission file, requesting one task on a single node, then launch it.</p>
<div class="language-bash codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-bash codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ </span><span class="token function" style="color:hsl(221, 87%, 60%)">nano</span><span class="token plain"> serial-job.sh</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ </span><span class="token function" style="color:hsl(221, 87%, 60%)">cat</span><span class="token plain"> serial-job.sh</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-bash codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token shebang important" style="color:hsl(230, 8%, 24%);font-weight:bold">#!/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH -J solo-job</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --nodes=1</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --ntasks-per-node=1 </span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --mem=3G</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Load the computing environment we need</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">module load python/intel/3.8.6</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">module load openmpi/gcc/4.1.6</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">source</span><span class="token plain"> /home/yourUsername/amdahl/test_venv/bin/activate</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Execute the task</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">srun amdahl</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-bash codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ sbatch serial-job.sh</span><br></span></code></pre></div></div>
<p>As before, use the Slurm status commands to check whether your job is running and when it ends:</p>
<div class="language-bash codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-bash codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ squeue </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-u</span><span class="token plain"> NetID</span><br></span></code></pre></div></div>
<p>Use <code>ls</code> to locate the output file. The <code>-t</code> flag sorts in reverse-chronological order: newest first. What was the output?</p>
<details class="details_vrYX alert alert--info details_lKA2" data-collapsed="true"><summary><div class="theme-admonition theme-admonition-info admonition_Ng6n alert alert--info"><div class="admonitionHeading_h3_P"><span class="admonitionIcon_xiRV"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Read the Job Output</div><div class="admonitionContent_oejY"><p><strong>[Click for Output]</strong></p></div></div></summary><div><div class="collapsibleContent_NAt9"><div class="theme-admonition theme-admonition-tip admonition_Ng6n alert alert--success"><div class="admonitionHeading_h3_P"><span class="admonitionIcon_xiRV"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Output</div><div class="admonitionContent_oejY"><p>The cluster output should be written to a file in the folder you launched the job from. For example,</p><div class="language-bash codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-bash codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ </span><span class="token function" style="color:hsl(221, 87%, 60%)">ls</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-t</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">slurm-347087.out  serial-job.sh  amdahl  README.md  LICENSE.txt</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ </span><span class="token function" style="color:hsl(221, 87%, 60%)">cat</span><span class="token plain"> slurm-347087.out</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">Doing </span><span class="token number" style="color:hsl(35, 99%, 36%)">30.000</span><span class="token plain"> seconds of </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;work&#x27;</span><span class="token plain"> on </span><span class="token number" style="color:hsl(35, 99%, 36%)">1</span><span class="token plain"> processor,</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">which</span><span class="token plain"> should take </span><span class="token number" style="color:hsl(35, 99%, 36%)">30.000</span><span class="token plain"> seconds with </span><span class="token number" style="color:hsl(35, 99%, 36%)">0.850</span><span class="token plain"> parallel proportion of the workload.</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  Hello, World</span><span class="token operator" style="color:hsl(221, 87%, 60%)">!</span><span class="token plain"> I am process </span><span class="token number" style="color:hsl(35, 99%, 36%)">0</span><span class="token plain"> of </span><span class="token number" style="color:hsl(35, 99%, 36%)">1</span><span class="token plain"> on cs. I will </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">do</span><span class="token plain"> all the serial </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;work&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">4.500</span><span class="token plain"> seconds.</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  Hello, World</span><span class="token operator" style="color:hsl(221, 87%, 60%)">!</span><span class="token plain"> I am process </span><span class="token number" style="color:hsl(35, 99%, 36%)">0</span><span class="token plain"> of </span><span class="token number" style="color:hsl(35, 99%, 36%)">1</span><span class="token plain"> on cs. I will </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">do</span><span class="token plain"> parallel </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;work&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">25.500</span><span class="token plain"> seconds.</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">Total execution </span><span class="token function" style="color:hsl(221, 87%, 60%)">time</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">according to rank </span><span class="token number" style="color:hsl(35, 99%, 36%)">0</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain">: </span><span class="token number" style="color:hsl(35, 99%, 36%)">30.033</span><span class="token plain"> seconds</span><br></span></code></pre></div></div></div></div></div></div></details>
<p>As we saw before, two of the <code>amdahl</code> program flags set the amount of work and the proportion of that work that is parallel in nature. Based on the output, we can see that the code uses a default of 30 seconds of work that is 85% parallel. The program ran for just over 30 seconds in total, and if we run the numbers, it is true that 15% of it was marked ‘serial’ and 85% was ‘parallel’.</p>
<p>Since we only gave the job one CPU, this job wasn’t really parallel: the same processor performed the ‘serial’ work for 4.5 seconds, then the ‘parallel’ part for 25.5 seconds, and no time was saved. The cluster can do better, if we ask.</p>
<h2 class="anchor anchorWithStickyNavbar_xx5F" id="running-the-parallel-job">Running the Parallel Job<a href="#running-the-parallel-job" class="hash-link" aria-label="Direct link to Running the Parallel Job" title="Direct link to Running the Parallel Job">​</a></h2>
<p>The <code>amdahl</code> program uses the Message Passing Interface (MPI) for parallelism – this is a common tool on HPC systems.</p>
<div class="theme-admonition theme-admonition-tip admonition_Ng6n alert alert--success"><div class="admonitionHeading_h3_P"><span class="admonitionIcon_xiRV"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>What is MPI?</div><div class="admonitionContent_oejY"><p>The Message Passing Interface is a set of tools which allow multiple tasks running simultaneously to communicate with each other. Typically, a single executable is run multiple times, possibly on different machines, and the MPI tools are used to inform each instance of the executable about its sibling processes, and which instance it is. MPI also provides tools to allow communication between instances to coordinate work, exchange information about elements of the task, or to transfer data. An MPI instance typically has its own copy of all the local variables.</p></div></div>
<p>While MPI-aware executables can generally be run as stand-alone programs, in order for them to run in parallel they must use an MPI <em>run-time environment</em>, which is a specific implementation of the MPI <em>standard</em>. To activate the MPI environment, the program should be started via a command such as <code>mpiexec</code> (or <code>mpirun</code>, or <code>srun</code>, etc. depending on the MPI run-time you need to use), which will ensure that the appropriate run-time support for parallelism is included.</p>
<div class="theme-admonition theme-admonition-tip admonition_Ng6n alert alert--success"><div class="admonitionHeading_h3_P"><span class="admonitionIcon_xiRV"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>MPI Runtime Arguments</div><div class="admonitionContent_oejY"><p>On their own, commands such as <code>mpiexec</code> can take many arguments specifying how many machines will participate in the execution, and you might need these if you would like to run an MPI program on your own (for example, on your laptop). In the context of a queuing system, however, it is frequently the case that MPI run-time will obtain the necessary parameters from the queuing system, by examining the environment variables set when the job is launched.</p></div></div>
<p>Let’s modify the job script to request more cores and use the MPI run-time.</p>
<div class="language-bash codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-bash codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ </span><span class="token function" style="color:hsl(221, 87%, 60%)">cp</span><span class="token plain"> serial-job.sh parallel-job.sh</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ </span><span class="token function" style="color:hsl(221, 87%, 60%)">nano</span><span class="token plain"> parallel-job.sh</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ </span><span class="token function" style="color:hsl(221, 87%, 60%)">cat</span><span class="token plain"> parallel-job.sh</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#!/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH -J parallel-pi</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --nodes=4</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --ntasks-per-node=1 </span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --mem=3G</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Load the computing environment we need</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">module load python/intel/3.8.6</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">module load openmpi/gcc/4.1.6</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">source</span><span class="token plain"> /home/yourUsername/amdahl/test_venv/bin/activate</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Execute the task</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">srun amdahl</span><br></span></code></pre></div></div>
<p>Then submit your job. Note that the submission command has not really changed from how we submitted the serial job: all the parallel settings are in the batch file rather than the command line.</p>
<div class="language-bash codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-bash codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ sbatch parallel-job.sh</span><br></span></code></pre></div></div>
<p>As before, use the status commands to check when your job runs.</p>
<div class="language-bash codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-bash codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ </span><span class="token function" style="color:hsl(221, 87%, 60%)">ls</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-t</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">slurm-347178.out  parallel-job.sh  slurm-347087.out  serial-job.sh  amdahl  README.md  LICENSE.txt</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ </span><span class="token function" style="color:hsl(221, 87%, 60%)">cat</span><span class="token plain"> slurm-347178.out</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">Doing </span><span class="token number" style="color:hsl(35, 99%, 36%)">30.000</span><span class="token plain"> seconds of </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;work&#x27;</span><span class="token plain"> on </span><span class="token number" style="color:hsl(35, 99%, 36%)">4</span><span class="token plain"> processors,</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">which</span><span class="token plain"> should take </span><span class="token number" style="color:hsl(35, 99%, 36%)">10.875</span><span class="token plain"> seconds with </span><span class="token number" style="color:hsl(35, 99%, 36%)">0.850</span><span class="token plain"> parallel proportion of the workload.</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  Hello, World</span><span class="token operator" style="color:hsl(221, 87%, 60%)">!</span><span class="token plain"> I am process </span><span class="token number" style="color:hsl(35, 99%, 36%)">0</span><span class="token plain"> of </span><span class="token number" style="color:hsl(35, 99%, 36%)">4</span><span class="token plain"> on cs. I will </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">do</span><span class="token plain"> all the serial </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;work&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">4.500</span><span class="token plain"> seconds.</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  Hello, World</span><span class="token operator" style="color:hsl(221, 87%, 60%)">!</span><span class="token plain"> I am process </span><span class="token number" style="color:hsl(35, 99%, 36%)">2</span><span class="token plain"> of </span><span class="token number" style="color:hsl(35, 99%, 36%)">4</span><span class="token plain"> on cs. I will </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">do</span><span class="token plain"> parallel </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;work&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">6.375</span><span class="token plain"> seconds.</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  Hello, World</span><span class="token operator" style="color:hsl(221, 87%, 60%)">!</span><span class="token plain"> I am process </span><span class="token number" style="color:hsl(35, 99%, 36%)">1</span><span class="token plain"> of </span><span class="token number" style="color:hsl(35, 99%, 36%)">4</span><span class="token plain"> on cs. I will </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">do</span><span class="token plain"> parallel </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;work&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">6.375</span><span class="token plain"> seconds.</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  Hello, World</span><span class="token operator" style="color:hsl(221, 87%, 60%)">!</span><span class="token plain"> I am process </span><span class="token number" style="color:hsl(35, 99%, 36%)">3</span><span class="token plain"> of </span><span class="token number" style="color:hsl(35, 99%, 36%)">4</span><span class="token plain"> on cs. I will </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">do</span><span class="token plain"> parallel </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;work&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">6.375</span><span class="token plain"> seconds.</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  Hello, World</span><span class="token operator" style="color:hsl(221, 87%, 60%)">!</span><span class="token plain"> I am process </span><span class="token number" style="color:hsl(35, 99%, 36%)">0</span><span class="token plain"> of </span><span class="token number" style="color:hsl(35, 99%, 36%)">4</span><span class="token plain"> on cs. I will </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">do</span><span class="token plain"> parallel </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;work&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">6.375</span><span class="token plain"> seconds.</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">Total execution </span><span class="token function" style="color:hsl(221, 87%, 60%)">time</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">according to rank </span><span class="token number" style="color:hsl(35, 99%, 36%)">0</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain">: </span><span class="token number" style="color:hsl(35, 99%, 36%)">10.888</span><span class="token plain"> seconds</span><br></span></code></pre></div></div>
<details class="details_vrYX alert alert--info details_lKA2" data-collapsed="true"><summary><div class="theme-admonition theme-admonition-info admonition_Ng6n alert alert--info"><div class="admonitionHeading_h3_P"><span class="admonitionIcon_xiRV"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Is it 4× faster?</div><div class="admonitionContent_oejY"><p>The parallel job received 4× more processors than the serial job: does that mean it finished in ¼ the time? <br>
<strong>[Click for Solution]</strong></p></div></div></summary><div><div class="collapsibleContent_NAt9"><div class="theme-admonition theme-admonition-tip admonition_Ng6n alert alert--success"><div class="admonitionHeading_h3_P"><span class="admonitionIcon_xiRV"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Solution</div><div class="admonitionContent_oejY"><p>The parallel job did take less time: 11 seconds is better than 30! But it is only a 2.7× improvement, not 4×.</p><p>Look at the job output:</p><ul>
<li>While “process 0” did serial work, processes 1 through 3 did their parallel work.</li>
<li>While process 0 caught up on its parallel work, the rest did nothing at all.</li>
</ul><p>Process 0 always has to finish its serial task before it can start on the parallel work. This sets a lower limit on the amount of time this job will take, no matter how many cores you throw at it.</p><p>This is the basic principle behind <a href="https://en.wikipedia.org/wiki/Amdahl&#x27;s_law" target="_blank" rel="noopener noreferrer">Amdahl’s Law</a>, which is one way of predicting improvements in execution time for a fixed workload that can be subdivided and run in parallel to some extent.</p></div></div></div></div></details>
<h2 class="anchor anchorWithStickyNavbar_xx5F" id="how-much-does-parallel-execution-improve-performance">How Much Does Parallel Execution Improve Performance?<a href="#how-much-does-parallel-execution-improve-performance" class="hash-link" aria-label="Direct link to How Much Does Parallel Execution Improve Performance?" title="Direct link to How Much Does Parallel Execution Improve Performance?">​</a></h2>
<p>In theory, dividing up a perfectly parallel calculation among <em>n</em> MPI processes should produce a decrease in total run time by a factor of <em>n</em>. As we have just seen, real programs need some time for the MPI processes to communicate and coordinate, and some types of calculations can’t be subdivided: they only run effectively on a single CPU.</p>
<p>Additionally, if the MPI processes operate on different physical CPUs in the computer, or across multiple compute nodes, even more time is required for communication than it takes when all processes operate on a single CPU.</p>
<p>In practice, it’s common to evaluate the parallelism of an MPI program by:</p>
<ul>
<li>running the program across a range of CPU counts</li>
<li>recording the execution time on each run</li>
<li>comparing each execution time to the time when using a single CPU</li>
</ul>
<p>Since “more is better” – improvement is easier to interpret from increases in some quantity than decreases – comparisons are made using the speedup factor <em>S</em>, which is calculated as the single-CPU execution time divided by the multi-CPU execution time. For a perfectly parallel program, a plot of the speedup S versus the number of CPUs <em>n</em> would give a straight line, S = n.</p>
<p>Let’s run one more job, so we can see how close to a straight line our amdahl code gets.</p>
<div class="language-bash codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-bash codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ </span><span class="token function" style="color:hsl(221, 87%, 60%)">nano</span><span class="token plain"> parallel-job.sh</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ </span><span class="token function" style="color:hsl(221, 87%, 60%)">cat</span><span class="token plain"> parallel-job.sh</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#!/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH -J parallel-pi</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --nodes=8</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --ntasks-per-node=1</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --mem=3G</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Load the computing environment we need</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">module load python/intel/3.8.6</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">module load openmpi/gcc/4.1.6</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">source</span><span class="token plain"> /home/yourUsername/amdahl/test_venv/bin/activate</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Execute the task</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">srun amdahl</span><br></span></code></pre></div></div>
<p>Then submit your job. Note that the submission command has not really changed from how we submitted the serial job: all the parallel settings are in the batch file rather than the command line.</p>
<div class="language-bash codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-bash codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ sbatch parallel-job.sh</span><br></span></code></pre></div></div>
<p>As before, use the status commands to check when your job runs.</p>
<div class="language-bash codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-bash codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ </span><span class="token function" style="color:hsl(221, 87%, 60%)">ls</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-t</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">slurm-347271.out  parallel-job.sh  slurm-347178.out  slurm-347087.out  serial-job.sh  amdahl  README.md  LICENSE.txt</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ </span><span class="token function" style="color:hsl(221, 87%, 60%)">cat</span><span class="token plain"> slurm-347178.out</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">which</span><span class="token plain"> should take </span><span class="token number" style="color:hsl(35, 99%, 36%)">7.688</span><span class="token plain"> seconds with </span><span class="token number" style="color:hsl(35, 99%, 36%)">0.850</span><span class="token plain"> parallel proportion of the workload.</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  Hello, World</span><span class="token operator" style="color:hsl(221, 87%, 60%)">!</span><span class="token plain"> I am process </span><span class="token number" style="color:hsl(35, 99%, 36%)">4</span><span class="token plain"> of </span><span class="token number" style="color:hsl(35, 99%, 36%)">8</span><span class="token plain"> on cs. I will </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">do</span><span class="token plain"> parallel </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;work&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">3.188</span><span class="token plain"> seconds.</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  Hello, World</span><span class="token operator" style="color:hsl(221, 87%, 60%)">!</span><span class="token plain"> I am process </span><span class="token number" style="color:hsl(35, 99%, 36%)">0</span><span class="token plain"> of </span><span class="token number" style="color:hsl(35, 99%, 36%)">8</span><span class="token plain"> on cs. I will </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">do</span><span class="token plain"> all the serial </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;work&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">4.500</span><span class="token plain"> seconds.</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  Hello, World</span><span class="token operator" style="color:hsl(221, 87%, 60%)">!</span><span class="token plain"> I am process </span><span class="token number" style="color:hsl(35, 99%, 36%)">2</span><span class="token plain"> of </span><span class="token number" style="color:hsl(35, 99%, 36%)">8</span><span class="token plain"> on cs. I will </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">do</span><span class="token plain"> parallel </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;work&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">3.188</span><span class="token plain"> seconds.</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  Hello, World</span><span class="token operator" style="color:hsl(221, 87%, 60%)">!</span><span class="token plain"> I am process </span><span class="token number" style="color:hsl(35, 99%, 36%)">1</span><span class="token plain"> of </span><span class="token number" style="color:hsl(35, 99%, 36%)">8</span><span class="token plain"> on cs. I will </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">do</span><span class="token plain"> parallel </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;work&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">3.188</span><span class="token plain"> seconds.</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  Hello, World</span><span class="token operator" style="color:hsl(221, 87%, 60%)">!</span><span class="token plain"> I am process </span><span class="token number" style="color:hsl(35, 99%, 36%)">3</span><span class="token plain"> of </span><span class="token number" style="color:hsl(35, 99%, 36%)">8</span><span class="token plain"> on cs. I will </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">do</span><span class="token plain"> parallel </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;work&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">3.188</span><span class="token plain"> seconds.</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  Hello, World</span><span class="token operator" style="color:hsl(221, 87%, 60%)">!</span><span class="token plain"> I am process </span><span class="token number" style="color:hsl(35, 99%, 36%)">5</span><span class="token plain"> of </span><span class="token number" style="color:hsl(35, 99%, 36%)">8</span><span class="token plain"> on cs. I will </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">do</span><span class="token plain"> parallel </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;work&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">3.188</span><span class="token plain"> seconds.</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  Hello, World</span><span class="token operator" style="color:hsl(221, 87%, 60%)">!</span><span class="token plain"> I am process </span><span class="token number" style="color:hsl(35, 99%, 36%)">6</span><span class="token plain"> of </span><span class="token number" style="color:hsl(35, 99%, 36%)">8</span><span class="token plain"> on cs. I will </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">do</span><span class="token plain"> parallel </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;work&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">3.188</span><span class="token plain"> seconds.</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  Hello, World</span><span class="token operator" style="color:hsl(221, 87%, 60%)">!</span><span class="token plain"> I am process </span><span class="token number" style="color:hsl(35, 99%, 36%)">7</span><span class="token plain"> of </span><span class="token number" style="color:hsl(35, 99%, 36%)">8</span><span class="token plain"> on cs. I will </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">do</span><span class="token plain"> parallel </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;work&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">3.188</span><span class="token plain"> seconds.</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  Hello, World</span><span class="token operator" style="color:hsl(221, 87%, 60%)">!</span><span class="token plain"> I am process </span><span class="token number" style="color:hsl(35, 99%, 36%)">0</span><span class="token plain"> of </span><span class="token number" style="color:hsl(35, 99%, 36%)">8</span><span class="token plain"> on cs. I will </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">do</span><span class="token plain"> parallel </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;work&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">3.188</span><span class="token plain"> seconds.</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">Total execution </span><span class="token function" style="color:hsl(221, 87%, 60%)">time</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">according to rank </span><span class="token number" style="color:hsl(35, 99%, 36%)">0</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain">: </span><span class="token number" style="color:hsl(35, 99%, 36%)">7.697</span><span class="token plain"> seconds</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_Ng6n alert alert--info"><div class="admonitionHeading_h3_P"><span class="admonitionIcon_xiRV"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Non-Linear Output</div><div class="admonitionContent_oejY"><p>When we ran the job with 4 parallel workers, the serial job wrote its output first, then the parallel processes wrote their output, with process 0 coming in first and last.</p><p>With 8 workers, this is not the case: since the parallel workers take less time than the serial work, it is hard to say which process will write its output first, except that it will not be process 0!</p></div></div>
<p>Now, let’s summarize the amount of time it took each job to run:</p>
<table><thead><tr><th>Number of CPUs</th><th>Runtime (sec)</th></tr></thead><tbody><tr><td>1</td><td>30.033</td></tr><tr><td>4</td><td>10.888</td></tr><tr><td>8</td><td>7.697</td></tr></tbody></table>
<p>Then, use the first row to compute speedups S, using Python as a command-line calculator:</p>
<div class="language-bash codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-bash codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> </span><span class="token for-or-select variable" style="color:hsl(221, 87%, 60%)">n</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">in</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">30.033</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">10.888</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">7.697</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">do</span><span class="token plain"> python3 </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-c</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&quot;print(30.033 / </span><span class="token string variable" style="color:hsl(221, 87%, 60%)">$n</span><span class="token string" style="color:hsl(119, 34%, 47%)">)&quot;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">done</span><br></span></code></pre></div></div>
<table><thead><tr><th>Number of CPUs</th><th>Speedup</th><th>Ideal</th></tr></thead><tbody><tr><td>1</td><td>1.0</td><td>1</td></tr><tr><td>4</td><td>2.75</td><td>4</td></tr><tr><td>8</td><td>3.90</td><td>8</td></tr></tbody></table>
<p>The job output files have been telling us that this program is performing 85% of its work in parallel, leaving 15% to run in serial. This seems reasonably high, but our quick study of speedup shows that in order to get a 4× speedup, we have to use 8 or 9 processors in parallel. In real programs, the speedup factor is influenced by</p>
<ul>
<li>CPU design</li>
<li>communication network between compute nodes</li>
<li>MPI library implementations</li>
<li>details of the MPI program itself</li>
</ul>
<p>Using Amdahl’s Law, you can prove that with this program, it is <em>impossible</em> to reach 8× speedup, no matter how many processors you have on hand.  We&#x27;ll discuss estimating job resources more in the next tutorial <a href="/rts-docs-dev/pr-preview/pr-121/docs/hpc/tutorial_intro_hpc/using_resources_effectively/">Using Resources Effectively</a>.</p>
<p>In an HPC environment, we try to reduce the execution time for all types of jobs, and MPI is an extremely common way to combine dozens, hundreds, or thousands of CPUs into solving a single problem. To learn more about parallelization, see the <a href="https://www.hpc-carpentry.org/hpc-parallel-novice/" target="_blank" rel="noopener noreferrer">parallel novice lesson</a>.</p>
<p>Key Points</p>
<ul>
<li>Parallel programming allows applications to take advantage of parallel hardware.</li>
<li>The queuing system facilitates executing parallel tasks.</li>
<li>Performance improvements from parallel execution do not scale linearly.</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/NYU-ITS/rts-docs-dev/blob/main/docs/hpc/14_tutorial_intro_hpc/08_running_parallel_job.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_lum_" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_HRh4"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/rts-docs-dev/pr-preview/pr-121/docs/hpc/tutorial_intro_hpc/transferring_files_remote/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Transferring files with remote computers</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/rts-docs-dev/pr-preview/pr-121/docs/hpc/tutorial_intro_hpc/using_resources_effectively/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Using resources effectively</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_HlGI thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#install-the-amdahl-program" class="table-of-contents__link toc-highlight">Install the Amdahl Program</a></li><li><a href="#help" class="table-of-contents__link toc-highlight">Help!</a></li><li><a href="#running-the-job-on-a-compute-node" class="table-of-contents__link toc-highlight">Running the Job on a Compute Node</a></li><li><a href="#running-the-parallel-job" class="table-of-contents__link toc-highlight">Running the Parallel Job</a></li><li><a href="#how-much-does-parallel-execution-improve-performance" class="table-of-contents__link toc-highlight">How Much Does Parallel Execution Improve Performance?</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Contact</div><ul class="footer__items clean-list"><li class="footer__item"><a href="mailto:hpc@nyu.edu" target="_blank" rel="noopener noreferrer" class="footer__link-item">Email for HPC support<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_S7uf"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="mailto:hsrn-support@nyu.edu" target="_blank" rel="noopener noreferrer" class="footer__link-item">Email for HSRN support<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_S7uf"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="mailto:genai-support@nyu.edu" target="_blank" rel="noopener noreferrer" class="footer__link-item">Email for general GenAI support<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_S7uf"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="mailto:Genai-research-support@nyu.edu" target="_blank" rel="noopener noreferrer" class="footer__link-item">Email for GenAI for research support<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_S7uf"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://guides.nyu.edu/" target="_blank" rel="noopener noreferrer" class="footer__link-item">NYU Libraries Research Guides<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_S7uf"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://sites.google.com/nyu.edu/forc-camp/home" target="_blank" rel="noopener noreferrer" class="footer__link-item">FORC camp<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_S7uf"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/rts-docs-dev/pr-preview/pr-121/blog/">Blog</a></li><li class="footer__item"><a href="https://github.com/NYU-ITS/rts-docs-dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_S7uf"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Made with 💜 in NYC!</div></div></div></footer></div>
</body>
</html>