<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-cloud/dataproc/data_management" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Data management | Connecting researchers to computational resources.</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-site.example.com/rts-docs-dev/pr-preview/pr-142/img/NYU.svg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-site.example.com/rts-docs-dev/pr-preview/pr-142/img/NYU.svg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-site.example.com/rts-docs-dev/pr-preview/pr-142/docs/cloud/dataproc/data_management/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Data management | Connecting researchers to computational resources."><meta data-rh="true" name="description" content="HDFS stands for Hadoop Distributed File System. HDFS is a highly fault-tolerant file system and is designed to be deployed on low-cost hardware. HDFS provides high throughput access to application data and is suitable for analyses that use large datasets."><meta data-rh="true" property="og:description" content="HDFS stands for Hadoop Distributed File System. HDFS is a highly fault-tolerant file system and is designed to be deployed on low-cost hardware. HDFS provides high throughput access to application data and is suitable for analyses that use large datasets."><link data-rh="true" rel="icon" href="/rts-docs-dev/pr-preview/pr-142/img/NYU.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-site.example.com/rts-docs-dev/pr-preview/pr-142/docs/cloud/dataproc/data_management/"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/rts-docs-dev/pr-preview/pr-142/docs/cloud/dataproc/data_management/" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/rts-docs-dev/pr-preview/pr-142/docs/cloud/dataproc/data_management/" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Data management","item":"https://your-docusaurus-site.example.com/rts-docs-dev/pr-preview/pr-142/docs/cloud/dataproc/data_management"}]}</script><link rel="alternate" type="application/rss+xml" href="/rts-docs-dev/pr-preview/pr-142/blog/rss.xml" title="Connecting researchers to computational resources. RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/rts-docs-dev/pr-preview/pr-142/blog/atom.xml" title="Connecting researchers to computational resources. Atom Feed"><link rel="stylesheet" href="/rts-docs-dev/pr-preview/pr-142/assets/css/styles.508f649a.css">
<script src="/rts-docs-dev/pr-preview/pr-142/assets/js/runtime~main.11a73322.js" defer="defer"></script>
<script src="/rts-docs-dev/pr-preview/pr-142/assets/js/main.af5e288f.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/rts-docs-dev/pr-preview/pr-142/img/NYU.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_QK_K" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/rts-docs-dev/pr-preview/pr-142/"><div class="navbar__logo"><img src="/rts-docs-dev/pr-preview/pr-142/img/NYU.svg" alt="NYU torch logo" class="themedComponent_qITe themedComponent--light_P7Wy"><img src="/rts-docs-dev/pr-preview/pr-142/img/NYU.svg" alt="NYU torch logo" class="themedComponent_qITe themedComponent--dark_lB6v"></div><b class="navbar__title text--truncate">Research Technology Services</b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/rts-docs-dev/pr-preview/pr-142/docs/genai/getting_started/intro/">Pythia</a><a class="navbar__item navbar__link" href="/rts-docs-dev/pr-preview/pr-142/docs/hpc/getting_started/intro/">HPC</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rts-docs-dev/pr-preview/pr-142/docs/cloud/getting_started/intro/">Cloud</a><a class="navbar__item navbar__link" href="/rts-docs-dev/pr-preview/pr-142/docs/srde/getting_started/intro/">SRDE</a><a href="https://hsrn.nyu.edu/docs/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">HSRN<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_S7uf"><use href="#theme-svg-external-link"></use></svg></a><a class="navbar__item navbar__link" href="/rts-docs-dev/pr-preview/pr-142/blog/">Announcements</a><div class="toggle_Epwe colorModeToggle_bc_c"><button class="clean-btn toggleButton_w7AH toggleButtonDisabled_HAH_" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_XvL5 lightToggleIcon_V1T6"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_XvL5 darkToggleIcon_wogB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_XvL5 systemToggleIcon_rTjK"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_linB"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_MITy"><div class="docsWrapper_qr7G"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_F9zA" type="button"></button><div class="docRoot_clrU"><aside class="theme-doc-sidebar-container docSidebarContainer_hWjn"><div class="sidebarViewport_J_uj"><div class="sidebar_nG7m"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_ilEL"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rts-docs-dev/pr-preview/pr-142/docs/cloud/getting_started/intro/">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rts-docs-dev/pr-preview/pr-142/docs/cloud/gcp_self_managed/intro/">GCP self-managed projects</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rts-docs-dev/pr-preview/pr-142/docs/cloud/hpc_bursting_to_cloud/intro/">HPC bursting to cloud</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/rts-docs-dev/pr-preview/pr-142/docs/cloud/dataproc/intro/">Dataproc</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rts-docs-dev/pr-preview/pr-142/docs/cloud/dataproc/intro/">Dataproc</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rts-docs-dev/pr-preview/pr-142/docs/cloud/dataproc/data_management/">Data management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rts-docs-dev/pr-preview/pr-142/docs/cloud/dataproc/computation/">Computation</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rts-docs-dev/pr-preview/pr-142/docs/cloud/on_prem_cloud/intro/">Research Technology Cloud</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_cQ77"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_XMUu"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_v37g"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DbD0"><div class="docItemContainer_vk7o"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_SjX4" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/rts-docs-dev/pr-preview/pr-142/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_u2qz"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Dataproc</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Data management</span></li></ul></nav><div class="tocCollapsible_sUCF theme-doc-toc-mobile tocMobile_nu_L"><button type="button" class="clean-btn tocCollapsibleButton_Fdrn">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Data management</h1></header>
<p>HDFS stands for Hadoop Distributed File System. HDFS is a highly fault-tolerant file system and is designed to be deployed on low-cost hardware. HDFS provides high throughput access to application data and is suitable for analyses that use large datasets.</p>
<h3 class="anchor anchorWithStickyNavbar_xx5F" id="file-permissions-and-access-control-lists">File Permissions and Access Control Lists<a href="#file-permissions-and-access-control-lists" class="hash-link" aria-label="Direct link to File Permissions and Access Control Lists" title="Direct link to File Permissions and Access Control Lists">​</a></h3>
<p>You can share files with others using <a href="/rts-docs-dev/pr-preview/pr-142/docs/hpc/storage/sharing_data_on_hpc/">access control lists (ACLs)</a>. An ACL gives you per-file, per-directory and per-user control over who has permission to access files. You can see the ACL for a file or directory with the getfacl command:</p>
<div class="language-sh codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-sh codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">hdfs dfs </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-getfacl</span><span class="token plain">  /user/</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain">net_id</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain">_nyu_edu/testdir</span><br></span></code></pre></div></div>
<p>To modify permissions for files or directories, use setfacl</p>
<div class="language-sh codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-sh codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">hdfs dfs </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-setfacl</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-R</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-m</span><span class="token plain"> user:</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain">net_id</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain">_nyu_edu:rwx /user/</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain">net_id</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain">_nyu_edu/testdir</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">hdfs dfs </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-setfacl</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-R</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-m</span><span class="token plain"> default:user:</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain">net_id</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain">_nyu_edu:rwx /user/</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain">net_id</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain">_nyu_edu/testdir</span><br></span></code></pre></div></div>
<p>To open the subdirectory permission to others, you need to open each higher level directory&#x27;s navigation permission too:</p>
<div class="language-sh codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-sh codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">hdfs dfs </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-setfacl</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-m</span><span class="token plain"> user:</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain">net_id</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain">_nyu_edu:--x /user/</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain">net_id</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain">_nyu_edu</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_xx5F" id="uploading-data-to-hdfs-from-your-computer">Uploading Data to HDFS from Your Computer<a href="#uploading-data-to-hdfs-from-your-computer" class="hash-link" aria-label="Direct link to Uploading Data to HDFS from Your Computer" title="Direct link to Uploading Data to HDFS from Your Computer">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_xx5F" id="small-transfers">Small Transfers<a href="#small-transfers" class="hash-link" aria-label="Direct link to Small Transfers" title="Direct link to Small Transfers">​</a></h3>
<p>You can add smaller files to HDFS by copying them to your local filesystem / non-HDFS  home directory and then copying them from there to HDFS.  Note that there is a limit on the size of your local filesystem home directory, so you should only perform these steps for smaller amounts of data- for larger datasets you should use the method described in the Large Transfers section.</p>
<ul>
<li>Navigate to the command line interface by going to <code>http://dataproc.hpc.nyu.edu/ssh</code>.</li>
<li>In the upper right portion of the header banner, select Upload File.  Use the web browser dialog to select your file.</li>
<li>Once the file is uploaded to your Unix directory, run the following command to copy it into HDFS:</li>
</ul>
<div class="language-sh codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-sh codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">hdfs dfs </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-put</span><span class="token plain"> /home/</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain">your_netid</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain">_nyu_edu/</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain">path_to_file</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain">hdfs_path</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><br></span></code></pre></div></div>
<p>To retrieve data from HDFS and copy it to your local filesystem home directory, you can use one of the following commands:</p>
<div class="language-sh codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-sh codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">hdfs dfs </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-get</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain">hdfs_path</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> /home/</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain">your_netid</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain">_nyu_edu/</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain">path_to_file</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">hdfs dfs </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-copyToLocal</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain">hdfs_path</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> /home/</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain">your_netid</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain">_nyu_edu/</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain">path_to_file</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><br></span></code></pre></div></div>
<p>You can then download data by going to the upper right corner of the window in the command line interface and selecting the Download File option and entering a file path (i.e., <code>/home/&lt;your_netid&gt;_nyu_edu/&lt;path_to_file&gt;</code>).</p>
<p>To list files in HDFS, use the following command:</p>
<div class="language-sh codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-sh codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">hdfs dfs </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-ls</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_xx5F" id="large-transfers">Large Transfers<a href="#large-transfers" class="hash-link" aria-label="Direct link to Large Transfers" title="Direct link to Large Transfers">​</a></h3>
<p>To upload large datasets to HDFS, first navigate to the data ingest website at <a href="https://dataproc.hpc.nyu.edu/ingest" target="_blank" rel="noopener noreferrer">https://dataproc.hpc.nyu.edu/ingest</a>. The data ingest website provides a web interface for temporary cloud-based bucket storage.  Any datasets that are uploaded to the data ingest website will remain there for 2 days.  Before these 2 days have elapsed, you will need to upload your datasets to your HDFS home directory.  To do that you can use the following command after logging in:</p>
<div class="language-sh codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-sh codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">hadoop distcp gs://nyu-dataproc-hdfs-ingest/</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain">file_or_folder_name</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> /user/</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain">your_net_id</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain">_nyu_edu</span><br></span></code></pre></div></div>
<p>You can find the full path to your file/folder in the ingest storage by clicking on it in the web interface and then scrolling down to the gsutil URI field in the Live Object tab.</p>
<div class="theme-admonition theme-admonition-warning admonition_Ng6n alert alert--warning"><div class="admonitionHeading_h3_P"><span class="admonitionIcon_xiRV"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_oejY"><p>Data uploaded into the ingest website will be visible to all members of the cluster temporarily.  If you are uploading files that cannot be shared with all cluster users (e.g., code) please use the alternate method described below.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_xx5F" id="uploading-data-to-hdfs-from-torch">Uploading Data to HDFS from Torch<a href="#uploading-data-to-hdfs-from-torch" class="hash-link" aria-label="Direct link to Uploading Data to HDFS from Torch" title="Direct link to Uploading Data to HDFS from Torch">​</a></h2>
<p>First download gcloud on a desktop computer with a browser by following the instructions <a href="https://cloud.google.com/sdk/docs/install" target="_blank" rel="noopener noreferrer">here</a>. Ensure that you run the install command described as optional in step 4. Log into Torch and activate the Google Cloud command line interface module:</p>
<div class="language-sh codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-sh codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">ml load google-cloud-sdk/379.0.0</span><br></span></code></pre></div></div>
<p>Then log into Google Cloud by typing the following:</p>
<div class="language-sh codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-sh codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">gcloud auth login</span><br></span></code></pre></div></div>
<p>Copy and paste the command that you are given into a terminal application on your desktop and run it.  When prompted, type y to proceed.  If you are signed into multiple Google accounts, you will then be presented with a browser window where you can choose your account.  Select your NYU account.  Google will then present a message saying that “Google Cloud SDK wants to access your Google Account”.  Click Allow.</p>
<p>Copy the URL that you are given in the terminal window, and paste it into your Torch session on the line where gcloud asks for it.</p>
<p>Type <code>gcloud auth list</code> to verify that you are logged in:</p>
<div class="language-sh codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-sh codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@hlog-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ gcloud auth list</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">           Credentialed Accounts</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">ACTIVE             ACCOUNT</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">*                  NetID@nyu.edu</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">To </span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">set</span><span class="token plain"> the active account, run:</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    $ gcloud config </span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">set</span><span class="token plain"> account </span><span class="token variable" style="color:hsl(221, 87%, 60%)">`</span><span class="token variable" style="color:hsl(221, 87%, 60%)">ACCOUNT</span><span class="token variable" style="color:hsl(221, 87%, 60%)">`</span><br></span></code></pre></div></div>
<p>Now that you are logged in, use the instructions under the Small Transfers or Large Transfers sections below to upload your data.</p>
<h3 class="anchor anchorWithStickyNavbar_xx5F" id="small-transfers-1">Small Transfers<a href="#small-transfers-1" class="hash-link" aria-label="Direct link to Small Transfers" title="Direct link to Small Transfers">​</a></h3>
<p>Run the following commands on Torch to ensure that gcloud knows that you are using it with Dataproc (rather than a different Google Cloud application):</p>
<div class="language-sh codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-sh codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">gcloud config </span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">set</span><span class="token plain"> project hpc-dataproc-19b8</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">gcloud config </span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">set</span><span class="token plain"> compute/zone us-central1-f</span><br></span></code></pre></div></div>
<p>Run the following command on Torch to upload your file to your filesystem home directory on Dataproc:</p>
<div class="language-sh codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-sh codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">gcloud compute </span><span class="token function" style="color:hsl(221, 87%, 60%)">scp</span><span class="token plain"> MYFILE nyu-dataproc-m:~</span><br></span></code></pre></div></div>
<p>If you are prompted to give a passphrase while generating an SSH key, hit enter twice.  The above commands are the command line equivalent to the upload dialogue at <code>i```[http://dataproc.hpc.nyu.edu/ssh](http://dataproc.hpc.nyu.edu/ssh)</code> that is mentioned earlier.</p>
<p>Your file should now be available within your filesystem home directory on Dataproc.  You can then run the following command to get it into HDFS:</p>
<div class="language-sh codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-sh codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">hdfs dfs </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-put</span><span class="token plain"> /home/</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain">your_netid</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain">_nyu_edu/</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain">path_to_file</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain">hdfs_path</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_xx5F" id="large-transfers-1">Large Transfers<a href="#large-transfers-1" class="hash-link" aria-label="Direct link to Large Transfers" title="Direct link to Large Transfers">​</a></h3>
<p>On Torch, run the following to upload a single file to the staging bucket:</p>
<div class="language-sh codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-sh codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">gsutil </span><span class="token function" style="color:hsl(221, 87%, 60%)">cp</span><span class="token plain"> FILE  gs://nyu-dataproc-hdfs-ingest</span><br></span></code></pre></div></div>
<p>Or run the following to copy a directory:</p>
<div class="language-sh codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-sh codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">gsutil </span><span class="token function" style="color:hsl(221, 87%, 60%)">rsync</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-r</span><span class="token plain"> DIRECTORY gs://nyu-dataproc-hdfs-ingest</span><br></span></code></pre></div></div>
<p>The above commands are the command line equivalents to the data ingest website described earlier.</p>
<p>As with the earlier example, run the following from within Dataproc to ingest the dataset into your HDFS home directory:</p>
<div class="language-sh codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-sh codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">hadoop distcp gs://nyu-dataproc-hdfs-ingest/</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain">file_or_folder_name</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> /user/</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain">your_net_id</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain">_nyu_edu</span><br></span></code></pre></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/NYU-ITS/rts-docs-dev/blob/main/docs/cloud/04_dataproc/02_data_management.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_lum_" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_HRh4"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/rts-docs-dev/pr-preview/pr-142/docs/cloud/dataproc/intro/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Dataproc</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/rts-docs-dev/pr-preview/pr-142/docs/cloud/dataproc/computation/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Computation</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_HlGI thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#file-permissions-and-access-control-lists" class="table-of-contents__link toc-highlight">File Permissions and Access Control Lists</a></li><li><a href="#uploading-data-to-hdfs-from-your-computer" class="table-of-contents__link toc-highlight">Uploading Data to HDFS from Your Computer</a><ul><li><a href="#small-transfers" class="table-of-contents__link toc-highlight">Small Transfers</a></li><li><a href="#large-transfers" class="table-of-contents__link toc-highlight">Large Transfers</a></li></ul></li><li><a href="#uploading-data-to-hdfs-from-torch" class="table-of-contents__link toc-highlight">Uploading Data to HDFS from Torch</a><ul><li><a href="#small-transfers-1" class="table-of-contents__link toc-highlight">Small Transfers</a></li><li><a href="#large-transfers-1" class="table-of-contents__link toc-highlight">Large Transfers</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Contact</div><ul class="footer__items clean-list"><li class="footer__item"><a href="mailto:hpc@nyu.edu" target="_blank" rel="noopener noreferrer" class="footer__link-item">Email HPC support<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_S7uf"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="mailto:hsrn-support@nyu.edu" target="_blank" rel="noopener noreferrer" class="footer__link-item">Email HSRN support<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_S7uf"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="mailto:research-cloud-support@nyu.edu" target="_blank" rel="noopener noreferrer" class="footer__link-item">Email research cloud support<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_S7uf"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="mailto:genai-support@nyu.edu" target="_blank" rel="noopener noreferrer" class="footer__link-item">Email general GenAI support<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_S7uf"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="mailto:genai-research-support@nyu.edu" target="_blank" rel="noopener noreferrer" class="footer__link-item">Email GenAI for research support<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_S7uf"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://guides.nyu.edu/" target="_blank" rel="noopener noreferrer" class="footer__link-item">NYU Libraries Research Guides<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_S7uf"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://sites.google.com/nyu.edu/forc-camp/home" target="_blank" rel="noopener noreferrer" class="footer__link-item">FORC camp<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_S7uf"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/rts-docs-dev/pr-preview/pr-142/blog/">Announcements</a></li><li class="footer__item"><a href="https://github.com/NYU-ITS/rts-docs-dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_S7uf"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Made with 💜 in NYC!</div></div></div></footer></div>
</body>
</html>