<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-hpc/submitting_jobs/slurm_submitting_jobs" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.0">
<title data-rh="true">Slurm: Submitting Jobs | Connecting researchers to computational resources.</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-site.example.com/rts-docs-dev/pr-preview/pr-109/img/NYU.svg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-site.example.com/rts-docs-dev/pr-preview/pr-109/img/NYU.svg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-site.example.com/rts-docs-dev/pr-preview/pr-109/docs/hpc/submitting_jobs/slurm_submitting_jobs/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Slurm: Submitting Jobs | Connecting researchers to computational resources."><meta data-rh="true" name="description" content="Batch vs Interactive Jobs"><meta data-rh="true" property="og:description" content="Batch vs Interactive Jobs"><link data-rh="true" rel="icon" href="/rts-docs-dev/pr-preview/pr-109/img/NYU.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-site.example.com/rts-docs-dev/pr-preview/pr-109/docs/hpc/submitting_jobs/slurm_submitting_jobs/"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/rts-docs-dev/pr-preview/pr-109/docs/hpc/submitting_jobs/slurm_submitting_jobs/" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/rts-docs-dev/pr-preview/pr-109/docs/hpc/submitting_jobs/slurm_submitting_jobs/" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Slurm: Submitting Jobs","item":"https://your-docusaurus-site.example.com/rts-docs-dev/pr-preview/pr-109/docs/hpc/submitting_jobs/slurm_submitting_jobs"}]}</script><link rel="alternate" type="application/rss+xml" href="/rts-docs-dev/pr-preview/pr-109/blog/rss.xml" title="Connecting researchers to computational resources. RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/rts-docs-dev/pr-preview/pr-109/blog/atom.xml" title="Connecting researchers to computational resources. Atom Feed"><link rel="stylesheet" href="/rts-docs-dev/pr-preview/pr-109/assets/css/styles.e507d9b2.css">
<script src="/rts-docs-dev/pr-preview/pr-109/assets/js/runtime~main.963cf0bc.js" defer="defer"></script>
<script src="/rts-docs-dev/pr-preview/pr-109/assets/js/main.aab6cbd2.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/rts-docs-dev/pr-preview/pr-109/img/NYU.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_nog5" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/rts-docs-dev/pr-preview/pr-109/"><div class="navbar__logo"><img src="/rts-docs-dev/pr-preview/pr-109/img/NYU.svg" alt="NYU torch logo" class="themedComponent_aMUo themedComponent--light_YqO5"><img src="/rts-docs-dev/pr-preview/pr-109/img/NYU.svg" alt="NYU torch logo" class="themedComponent_aMUo themedComponent--dark_yuql"></div><b class="navbar__title text--truncate">Research Technology Services</b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/rts-docs-dev/pr-preview/pr-109/docs/genai/getting_started/intro/">Pythia</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rts-docs-dev/pr-preview/pr-109/docs/hpc/getting_started/intro/">HPC</a><a class="navbar__item navbar__link" href="/rts-docs-dev/pr-preview/pr-109/docs/cloud/intro/">Cloud</a><a class="navbar__item navbar__link" href="/rts-docs-dev/pr-preview/pr-109/docs/srde/getting_started/intro/">SRDE</a><a href="https://hsrn.nyu.edu/docs/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">HSRN<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_MVl4"><use href="#theme-svg-external-link"></use></svg></a><a class="navbar__item navbar__link" href="/rts-docs-dev/pr-preview/pr-109/blog/">Announcements</a><div class="toggle_DrHm colorModeToggle_Anmw"><button class="clean-btn toggleButton_CbjY toggleButtonDisabled_ZgXc" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_Ck_4 lightToggleIcon_yqoY"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_Ck_4 darkToggleIcon_J3Ac"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_Ck_4 systemToggleIcon_udOF"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_MYiR"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_IDjs"><div class="docsWrapper_sA6D"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_A74F" type="button"></button><div class="docRoot_dspQ"><aside class="theme-doc-sidebar-container docSidebarContainer_t_xS"><div class="sidebarViewport_JcG2"><div class="sidebar_WKsH"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_LcTz"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rts-docs-dev/pr-preview/pr-109/docs/hpc/getting_started/intro/">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rts-docs-dev/pr-preview/pr-109/docs/hpc/connecting_to_hpc/connecting_to_hpc/">Setup</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rts-docs-dev/pr-preview/pr-109/docs/hpc/storage/intro_and_data_management/">Storage &amp; Data transfers</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rts-docs-dev/pr-preview/pr-109/docs/hpc/datasets/intro/">Datasets</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/rts-docs-dev/pr-preview/pr-109/docs/hpc/submitting_jobs/slurm_submitting_jobs/">Submitting jobs</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rts-docs-dev/pr-preview/pr-109/docs/hpc/submitting_jobs/slurm_submitting_jobs/">Slurm: Submitting Jobs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rts-docs-dev/pr-preview/pr-109/docs/hpc/submitting_jobs/slurm_main_commands/">Slurm: Main Commands</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rts-docs-dev/pr-preview/pr-109/docs/hpc/submitting_jobs/slurm_tutorial/">Slurm: Tutorial</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rts-docs-dev/pr-preview/pr-109/docs/hpc/tools_and_software/intro/">Tools &amp; Software available</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rts-docs-dev/pr-preview/pr-109/docs/hpc/containers/intro/">Containers</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rts-docs-dev/pr-preview/pr-109/docs/hpc/ml_ai_hpc/intro/">ML/AI on HPC</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rts-docs-dev/pr-preview/pr-109/docs/hpc/ood/open_on_demand/">Open OnDemand</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rts-docs-dev/pr-preview/pr-109/docs/hpc/training_and_support/training_at_nyu/">Training and Support</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rts-docs-dev/pr-preview/pr-109/docs/hpc/spec_sheet/">Greene Spec Sheet</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rts-docs-dev/pr-preview/pr-109/docs/hpc/system_status/">Greene System Status</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rts-docs-dev/pr-preview/pr-109/docs/hpc/tutorial_intro_shell_hpc/intro/">Tutorial: Intro to Shell for HPC</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rts-docs-dev/pr-preview/pr-109/docs/hpc/tutorial_intro_hpc/intro_hpc/">Tutorial: Intro to HPC</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_qJOu"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_ZB7S"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_VWgH"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_vexJ"><div class="docItemContainer_JC_B"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_vq9a" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/rts-docs-dev/pr-preview/pr-109/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_iFDY"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Submitting jobs</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Slurm: Submitting Jobs</span></li></ul></nav><div class="tocCollapsible_DwRi theme-doc-toc-mobile tocMobile_kPwe"><button type="button" class="clean-btn tocCollapsibleButton_ScPY">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Slurm: Submitting Jobs</h1></header>
<h2 class="anchor anchorWithStickyNavbar_aKB0" id="batch-vs-interactive-jobs">Batch vs Interactive Jobs<a href="#batch-vs-interactive-jobs" class="hash-link" aria-label="Direct link to Batch vs Interactive Jobs" title="Direct link to Batch vs Interactive Jobs">​</a></h2>
<ul>
<li>HPC workloads are usually better suited to <em>batch processing</em> than <em>interactive</em> working.</li>
<li>A batch job is sent to the system when submitted with an <strong>sbatch</strong> command.</li>
<li>The working pattern we are all familiar with is <em>interactive</em> - where we type ( or click ) something interactively, and the computer performs the associated action. Then we type ( or click ) the next thing.</li>
<li>Comments at the start of the script, which match a special pattern ( #SBATCH ) are read as Slurm options.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_aKB0" id="the-trouble-with-interactive-environments">The trouble with interactive environments<a href="#the-trouble-with-interactive-environments" class="hash-link" aria-label="Direct link to The trouble with interactive environments" title="Direct link to The trouble with interactive environments">​</a></h3>
<p>There is a reason why GUIs are less common in HPC environments: <strong>point-and-click</strong> is <strong>necessarily interactive</strong>. In HPC environments (<em>as we&#x27;ll see in session 3</em>) work is scheduled in order to allow exclusive use of the shared resources. On a busy system there may be several hours wait between when you submit a job and when the resources become available, so a reliance on user interaction is not viable. In Unix, commands need not be run interactively at the prompt, you can write a sequence of commands into a file to be run as a script, either manually (for sequences you find yourself repeating frequently) or by another program such as the batch system.</p>
<div class="theme-admonition theme-admonition-tip admonition_wwdC alert alert--success"><div class="admonitionHeading_U2M0"><span class="admonitionIcon_zflM"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_NRaz"><p>The job might not start immediately, and might take hours or days, so we prefer a <em>batch</em> approach:</p><ul>
<li>Plan the sequence of commands which will perform the actions we need<!-- -->
<ul>
<li>Write them into a script.</li>
</ul>
</li>
</ul><p>You can now run the script interactively, which is a great way to save effort if i frequently use the same workflow, or ...</p><ul>
<li>Submit the script to a batch system, to run on dedicated resources when they become available.</li>
</ul></div></div>
<h3 class="anchor anchorWithStickyNavbar_aKB0" id="where-does-the-output-go-">Where does the output go ?<a href="#where-does-the-output-go-" class="hash-link" aria-label="Direct link to Where does the output go ?" title="Direct link to Where does the output go ?">​</a></h3>
<ul>
<li>The batch system writes stdout and stderr from a job to a file named for example <em>&quot;slurm-12345.out&quot;</em>
<ul>
<li>You can change either stdout or stderr using sbatch options.</li>
</ul>
</li>
<li>While a job is running, it caches the stdout an stderr in the job working directory.</li>
<li>You can use redirection to send output of a specific command into a file.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_aKB0" id="writing-and-submitting-a-job">Writing and Submitting a Job<a href="#writing-and-submitting-a-job" class="hash-link" aria-label="Direct link to Writing and Submitting a Job" title="Direct link to Writing and Submitting a Job">​</a></h3>
<p>There are two aspects to a batch job script:</p>
<ul>
<li>A set of <em>SBATCH</em> directives describing the resources required and other information about the job.</li>
<li>The script itself, comprised of commands to set up and perform the computations without additional user interaction.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_aKB0" id="a-simple-example">A simple example<a href="#a-simple-example" class="hash-link" aria-label="Direct link to A simple example" title="Direct link to A simple example">​</a></h3>
<p>A typical batch script on an NYU HPC cluster looks something like these two examples:</p>
<div class="language-bash codeBlockContainer_MFUa theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Q7QX"><pre tabindex="0" class="prism-code language-bash codeBlock_dlwf thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EajK"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token shebang important" style="color:hsl(230, 8%, 24%);font-weight:bold">#!/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --nodes=1</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --ntasks-per-node=1</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --cpus-per-task=1</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --time=5:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --mem=2GB</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --job-name=myTest</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --mail-type=END</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --mail-user=bob.smith@nyu.edu</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --output=slurm_%j.out</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --error=slurm_%j.err</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">module purge</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">module load stata/17.0</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token assign-left variable" style="color:hsl(221, 87%, 60%)">RUNDIR</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token variable" style="color:hsl(221, 87%, 60%)">$SCRATCH</span><span class="token plain">/my_project/run-</span><span class="token variable" style="color:hsl(221, 87%, 60%)">${SLURM_JOB_ID</span><span class="token variable operator" style="color:hsl(221, 87%, 60%)">/</span><span class="token variable" style="color:hsl(221, 87%, 60%)">.*}</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">mkdir</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-p</span><span class="token plain"> </span><span class="token variable" style="color:hsl(221, 87%, 60%)">$RUNDIR</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token assign-left variable" style="color:hsl(221, 87%, 60%)">DATADIR</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token variable" style="color:hsl(221, 87%, 60%)">$SCRATCH</span><span class="token plain">/my_project/data</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">cd</span><span class="token plain"> </span><span class="token variable" style="color:hsl(221, 87%, 60%)">$RUNDIR</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">stata </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-b</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">do</span><span class="token plain"> </span><span class="token variable" style="color:hsl(221, 87%, 60%)">$DATADIR</span><span class="token plain">/data_0706.do</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_MFUa theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Q7QX"><pre tabindex="0" class="prism-code language-bash codeBlock_dlwf thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EajK"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token shebang important" style="color:hsl(230, 8%, 24%);font-weight:bold">#!/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --nodes=1</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --ntasks-per-node=1</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --cpus-per-task=1</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --time=5:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --mem=2GB</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --job-name=myTest</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --mail-type=END</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --mail-user=bob.smith@nyu.edu</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --output=slurm_%j.out</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --error=slurm_%j.err</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"> </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">module purge</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token assign-left variable" style="color:hsl(221, 87%, 60%)">SRCDIR</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token environment constant" style="color:hsl(35, 99%, 36%)">$HOME</span><span class="token plain">/my_project/code</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token assign-left variable" style="color:hsl(221, 87%, 60%)">RUNDIR</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token variable" style="color:hsl(221, 87%, 60%)">$SCRATCH</span><span class="token plain">/my_project/run-</span><span class="token variable" style="color:hsl(221, 87%, 60%)">${SLURM_JOB_ID</span><span class="token variable operator" style="color:hsl(221, 87%, 60%)">/</span><span class="token variable" style="color:hsl(221, 87%, 60%)">.*}</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">mkdir</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-p</span><span class="token plain"> </span><span class="token variable" style="color:hsl(221, 87%, 60%)">$RUNDIR</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">cd</span><span class="token plain"> </span><span class="token variable" style="color:hsl(221, 87%, 60%)">$SLURM_SUBMIT_DIR</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">cp</span><span class="token plain"> my_input_params.inp </span><span class="token variable" style="color:hsl(221, 87%, 60%)">$RUNDIR</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">cd</span><span class="token plain"> </span><span class="token variable" style="color:hsl(221, 87%, 60%)">$RUNDIR</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">module load fftw/intel/3.3.9</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token variable" style="color:hsl(221, 87%, 60%)">$SRCDIR</span><span class="token plain">/my_exec.exe </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain"> my_input_params.inp</span><br></span></code></pre></div></div>
<p>We&#x27;ll work through them more closely in a moment.
You submit the job with <em>sbatch</em>:</p>
<div class="language-sh codeBlockContainer_MFUa theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Q7QX"><pre tabindex="0" class="prism-code language-sh codeBlock_dlwf thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EajK"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ sbatch myscript.sh</span><br></span></code></pre></div></div>
<p>And monitor it&#x27;s progress with:</p>
<div class="language-sh codeBlockContainer_MFUa theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Q7QX"><pre tabindex="0" class="prism-code language-sh codeBlock_dlwf thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EajK"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ squeue </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-u</span><span class="token plain"> </span><span class="token environment constant" style="color:hsl(35, 99%, 36%)">$USER</span><br></span></code></pre></div></div>
<p><strong>What just happened ?</strong> Here&#x27;s an annotated version of the first script:</p>
<div class="language-sh codeBlockContainer_MFUa theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Q7QX"><pre tabindex="0" class="prism-code language-sh codeBlock_dlwf thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EajK"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token shebang important" style="color:hsl(230, 8%, 24%);font-weight:bold">#!/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># This line tells the shell how to execute this script, and is unrelated</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># to SLURM.</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">   </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># at the beginning of the script, lines beginning with &quot;#SBATCH&quot; are read by</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># SLURM and used to set queueing options. You can comment out a SBATCH</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># directive with a second leading #, eg:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">##SBATCH --nodes=1</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">   </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># we need 1 node, will launch a maximum of one task and use one cpu for the task: </span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --nodes=1</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --ntasks-per-node=1</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --cpus-per-task=1</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">   </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># we expect the job to finish within 5 hours. If it takes longer than 5</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># hours, SLURM can kill it:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --time=5:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">   </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># we expect the job to use no more than 2GB of memory:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --mem=2GB</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">   </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># we want the job to be named &quot;myTest&quot; rather than something generated</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># from the script name. This will affect the name of the job as reported</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># by squeue:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --job-name=myTest</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"> </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># when the job ends, send me an email at this email address.</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --mail-type=END</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --mail-user=bob.smith@nyu.edu</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">   </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># both standard output and standard error are directed to the same file.</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># It will be placed in the directory I submitted the job from and will</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># have a name like slurm_12345.out</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --output=slurm_%j.out</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"> </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># once the first non-comment, non-SBATCH-directive line is encountered, SLURM</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># stops looking for SBATCH directives. The remainder of the script is  executed</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># as a normal Unix shell script</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># first we ensure a clean running environment:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">module purge</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># and load the module for the software we are using:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">module load stata/17.0</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># next we create a unique directory to run this job in. We will record its</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># name in the shell variable &quot;RUNDIR&quot;, for better readability.</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># SLURM sets SLURM_JOB_ID to the job id, ${SLURM_JOB_ID/.*} expands to the job</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># id up to the first &#x27;.&#x27; We make the run directory in our area under $SCRATCH, because at NYU HPC</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># $SCRATCH is configured for the disk space and speed required by HPC jobs.</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token assign-left variable" style="color:hsl(221, 87%, 60%)">RUNDIR</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token variable" style="color:hsl(221, 87%, 60%)">$SCRATCH</span><span class="token plain">/my_project/run-</span><span class="token variable" style="color:hsl(221, 87%, 60%)">${SLURM_JOB_ID</span><span class="token variable operator" style="color:hsl(221, 87%, 60%)">/</span><span class="token variable" style="color:hsl(221, 87%, 60%)">.*}</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">mkdir</span><span class="token plain"> </span><span class="token variable" style="color:hsl(221, 87%, 60%)">$RUNDIR</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># we will be reading data in from somewhere, so define that too:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token assign-left variable" style="color:hsl(221, 87%, 60%)">DATADIR</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token variable" style="color:hsl(221, 87%, 60%)">$SCRATCH</span><span class="token plain">/my_project/data</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># the script will have started running in $HOME, so we need to move into the</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># unique directory we just created</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">cd</span><span class="token plain"> </span><span class="token variable" style="color:hsl(221, 87%, 60%)">$RUNDIR</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># now start the Stata job:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">stata </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-b</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">do</span><span class="token plain"> </span><span class="token variable" style="color:hsl(221, 87%, 60%)">$DATADIR</span><span class="token plain">/data_0706.do</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">The second script has the same SBATCH directives, but this </span><span class="token function" style="color:hsl(221, 87%, 60%)">time</span><span class="token plain"> we are using code we compiled ourselves. Starting after the SBATCH directives:</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># first we ensure a clean running environment:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">module purge</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># and ensure we can find the executable:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token assign-left variable" style="color:hsl(221, 87%, 60%)">SRCDIR</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token environment constant" style="color:hsl(35, 99%, 36%)">$HOME</span><span class="token plain">/my_project/code</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># create a unique directory to run this job in, as per the script above</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token assign-left variable" style="color:hsl(221, 87%, 60%)">RUNDIR</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token variable" style="color:hsl(221, 87%, 60%)">$SCRATCH</span><span class="token plain">/my_project/run-</span><span class="token variable" style="color:hsl(221, 87%, 60%)">${SLURM_JOB_ID</span><span class="token variable operator" style="color:hsl(221, 87%, 60%)">/</span><span class="token variable" style="color:hsl(221, 87%, 60%)">.*}</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">mkdir</span><span class="token plain"> </span><span class="token variable" style="color:hsl(221, 87%, 60%)">$RUNDIR</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># By default the script will have started running in the directory we ran sbatch from.</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># Let&#x27;s assume our input file is in the same directory in this example. SLURM</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># sets some environment variables with information about the job, including</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># SLURM_SUBMIT_DIR which is the directory the job was submitted from. So lets</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># go there and copy the input file to the run directory on /scratch:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">cd</span><span class="token plain"> </span><span class="token variable" style="color:hsl(221, 87%, 60%)">$SLURM_SUBMIT_DIR</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">cp</span><span class="token plain"> my_input_params.inp </span><span class="token variable" style="color:hsl(221, 87%, 60%)">$RUNDIR</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># go to the run directory to begin the run:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">cd</span><span class="token plain"> </span><span class="token variable" style="color:hsl(221, 87%, 60%)">$RUNDIR</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># load whatever environment modules the executable needs:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">module load fftw/intel/3.3.9</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)"># run the executable (sending the contents of my_input_params.inp to stdin)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token variable" style="color:hsl(221, 87%, 60%)">$SRCDIR</span><span class="token plain">/my_exec.exe </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain"> my_input_params.inp</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aKB0" id="batch-jobs">Batch Jobs<a href="#batch-jobs" class="hash-link" aria-label="Direct link to Batch Jobs" title="Direct link to Batch Jobs">​</a></h2>
<p>Jobs are submitted with the sbatch command:</p>
<div class="language-sh codeBlockContainer_MFUa theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Q7QX"><pre tabindex="0" class="prism-code language-sh codeBlock_dlwf thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EajK"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">sbatch options job-script</span><br></span></code></pre></div></div>
<p>The options tell SLURM information about the job, such as what resources will be needed. <strong>These can be specified in the job-script as SBATCH directives, or on the command line as options, or both</strong></p>
<div class="theme-admonition theme-admonition-note admonition_wwdC alert alert--secondary"><div class="admonitionHeading_U2M0"><span class="admonitionIcon_zflM"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_NRaz"><p>When SBATCH options are provided in both the script and the command line, the command line options take precedence should the two contradict each other.</p></div></div>
<p>For each option there is a corresponding SBATCH directive with the syntax:</p>
<div class="language-bash codeBlockContainer_MFUa theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Q7QX"><pre tabindex="0" class="prism-code language-bash codeBlock_dlwf thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EajK"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH option </span><br></span></code></pre></div></div>
<p>For example, you can specify that a job needs 2 nodes and 4 cores on each node ( by default one CPU core per task ) on each node by adding to the script the directive:</p>
<div class="language-bash codeBlockContainer_MFUa theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Q7QX"><pre tabindex="0" class="prism-code language-bash codeBlock_dlwf thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EajK"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token shebang important" style="color:hsl(230, 8%, 24%);font-weight:bold">#!/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --nodes=2</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --ntasks-per-node=4</span><br></span></code></pre></div></div>
<p>or as a command-line option to sbatch when you submit the job:</p>
<div class="language-sh codeBlockContainer_MFUa theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Q7QX"><pre tabindex="0" class="prism-code language-sh codeBlock_dlwf thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EajK"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ sbatch </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--nodes</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token number" style="color:hsl(35, 99%, 36%)">2</span><span class="token plain"> --ntasks-per-node</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token number" style="color:hsl(35, 99%, 36%)">4</span><span class="token plain"> my_script.sh</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_aKB0" id="options-to-manage-job-output">Options to manage job output<a href="#options-to-manage-job-output" class="hash-link" aria-label="Direct link to Options to manage job output" title="Direct link to Options to manage job output">​</a></h3>
<ul>
<li>
<p><code>-J jobname</code></p>
<ul>
<li>Give the job a name. The default is the filename of the job script. Within the job, <code>$SLURM_JOB_NAME</code> expands to the job name.</li>
</ul>
</li>
<li>
<p><code>-o path/for/stdout</code></p>
<ul>
<li>Send <code>stdout</code> to <code>path/for/stdout</code>. The default filename is slurm-<code>${SLURM_JOB_ID}.out</code>, e.g. slurm-<code>12345.out</code>, in the directory from which the job was submitted.</li>
</ul>
</li>
<li>
<p><code>-e path/for/stderr</code></p>
<ul>
<li>Send <code>stderr</code> to <code>path/for/stderr</code>.</li>
</ul>
</li>
<li>
<p><code>--mail-user=my_email_address@nyu.edu</code></p>
<ul>
<li>Send mail to <a href="mailto:my_email_address@nyu.edu" target="_blank" rel="noopener noreferrer">my_email_address@nyu.edu</a> when certain events occur.</li>
</ul>
</li>
<li>
<p><code>--mail-type=type</code></p>
<ul>
<li>Valid type values are NONE, BEGIN, END, FAIL, REQUIRE, ALL.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_aKB0" id="options-to-set-the-job-environment">Options to set the job environment:<a href="#options-to-set-the-job-environment" class="hash-link" aria-label="Direct link to Options to set the job environment:" title="Direct link to Options to set the job environment:">​</a></h3>
<ul>
<li><code>--export=VAR1,VAR2=&quot;some value&quot;,VAR3</code>
<ul>
<li>
<p>Pass variables to the job, either with a specific value (the <code>VAR=</code> form) or from the submitting environment ( without &quot;<code>=</code>&quot; )</p>
</li>
<li>
<p><code>--get-user-env</code>[=timeout][mode]</p>
</li>
<li>
<p>Run something like &quot;su <code>-</code> &lt;username&gt; -c /usr/bin/env&quot; and parse the output. Default timeout is 8 seconds. The mode value can be &quot;S&quot;, or &quot;L&quot; in which case &quot;su&quot; is executed with &quot;<code>-</code>&quot; option.</p>
</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_aKB0" id="options-to-request-compute-resources">Options to request compute resources<a href="#options-to-request-compute-resources" class="hash-link" aria-label="Direct link to Options to request compute resources" title="Direct link to Options to request compute resources">​</a></h3>
<ul>
<li>
<p><code>-t, --time=time</code></p>
<ul>
<li><code>Set a limit on the total run time. Acceptable formats include &quot;minutes&quot;, &quot;minutes:seconds&quot;, &quot;hours:minutes:seconds&quot;, &quot;days-hours&quot;, &quot;days-hours:minutes&quot; and &quot;days-hours:minutes:seconds&quot;</code>.</li>
</ul>
</li>
<li>
<p><code>--mem=MB</code></p>
<ul>
<li>Maximum memory per node the job will need in MegaBytes</li>
</ul>
</li>
<li>
<p><code>--mem-per-cpu=MB</code></p>
<ul>
<li><code>Memory required per allocated CPU in MegaBytes</code></li>
</ul>
</li>
<li>
<p><code>-N, --node=num</code></p>
<ul>
<li>Number of nodes are required. Default is 1 node.</li>
<li><code>-n, --ntasks=num</code></li>
<li>Maximum number tasks will be launched. Default is one task per node.</li>
<li><code>--ntasks-per-node=ntasks</code></li>
<li>Request that ntasks be invoked on each node.</li>
<li><code>-c, --cpus-per-task=ncpus</code></li>
<li>Require ncpus number of CPU cores per task. Without this option, allocate one core per task.<!-- -->
<ul>
<li>Requesting the resources you need, as accurately as possible, allows your job to be started at the earliest opportunity as well as helping the system to schedule work efficiently to everyone&#x27;s benefit.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_aKB0" id="options-for-running-interactively-on-the-compute-nodes-with-srun">Options for running interactively on the compute nodes with srun<a href="#options-for-running-interactively-on-the-compute-nodes-with-srun" class="hash-link" aria-label="Direct link to Options for running interactively on the compute nodes with srun" title="Direct link to Options for running interactively on the compute nodes with srun">​</a></h3>
<ul>
<li>
<p><code>-nnum</code></p>
<ul>
<li><code>Specify the number of tasks to run, eg. -n4. Default is one CPU core per task.</code> Don&#x27;t just submit the job, but also wait for it to start and connect <code>stdout</code>, <code>stderr</code>and <code>stdin</code> to the current terminal.</li>
</ul>
</li>
<li>
<p><code>-ttime</code></p>
<ul>
<li>Request job running duration, eg. <code>-t1:30:00</code></li>
</ul>
</li>
<li>
<p><code>--mem=MB</code></p>
<ul>
<li>Specify the real memory required per node in MegaBytes, eg. <code>--mem=4000</code></li>
<li><code>--pty</code></li>
<li>Execute the first task in pseudo terminal mode, eg. <code>--pty /bin/bash</code>, to start a bash command shell</li>
</ul>
</li>
<li>
<p><code>--x11</code></p>
<ul>
<li>Enable X forwarding, so programs using a GUI can be used during the session (provided you have X forwarding to your workstation set up)</li>
<li>To leave an interactive batch session, type <code>exit</code> at the command prompt</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_aKB0" id="options-for-delaying-starting-a-job">Options for delaying starting a job<a href="#options-for-delaying-starting-a-job" class="hash-link" aria-label="Direct link to Options for delaying starting a job" title="Direct link to Options for delaying starting a job">​</a></h3>
<ul>
<li>
<p><code>--begin=time</code></p>
<ul>
<li>Delay starting this job until after the specified date and time, eg. <code>--begin=9:42:00</code>, to start the job at 9:42:00 am</li>
</ul>
</li>
<li>
<p><code>-d, --dependency=dependency_list</code></p>
<ul>
<li>(More info here <a href="https://slurm.schedmd.com/sbatch.html" target="_blank" rel="noopener noreferrer">https://slurm.schedmd.com/sbatch.html</a>)</li>
<li>Example 1<!-- -->
<ul>
<li><code>--dependency=afterok:12345</code>, to delay starting this job until the job 12345 has completed successfully</li>
</ul>
</li>
<li>Example 2<!-- -->
<ul>
<li>Let us say job 1 uses sbatch file job1.sh, and job 2 uses job2.sh</li>
<li>Inside the batch file of the second job (job2.sh) add</li>
<li><code>#SBATCH --dependency=afterok:$job1</code></li>
<li>Start the first job and get id of the job</li>
<li><code>job1=$(echo $(sbatch job1.sh) | grep -Eo &quot;[0-9]+&quot;)</code></li>
<li>Schedule second jobs to start when the first one ends</li>
<li><code>sbatch job2.sh</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_aKB0" id="options-for-running-many-similar-jobs">Options for running many similar jobs<a href="#options-for-running-many-similar-jobs" class="hash-link" aria-label="Direct link to Options for running many similar jobs" title="Direct link to Options for running many similar jobs">​</a></h3>
<ul>
<li><code>-a, --array=indexes</code>
<ul>
<li>Submit an array of jobs with array ids as specified. Array ids can be specified as a numerical range, a comma-seperated list of numbers, or as some combination of the two. Each job instance will have an environment variable <code>SLURM_ARRAY_JOB_ID</code> and <code>SLURM_ARRAY_TASK_ID</code>. For example:</li>
<li><code>--array=1-11</code>, to start an array job with index from 1 to 11</li>
<li><code>--array=1-7:2</code>, to submit an array job with index step size 2</li>
<li><code>--array=1-9%4</code>, to submit an array job with simultaneously running job elements set to 4</li>
<li>The srun command is similar to <code>pbsdsh</code>. It launches tasks on allocated resources</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_aKB0" id="r-job-example">R Job Example<a href="#r-job-example" class="hash-link" aria-label="Direct link to R Job Example" title="Direct link to R Job Example">​</a></h2>
<p>Create a directory and an example R script</p>
<div class="language-bash codeBlockContainer_MFUa theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Q7QX"><pre tabindex="0" class="prism-code language-bash codeBlock_dlwf thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EajK"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ </span><span class="token function" style="color:hsl(221, 87%, 60%)">mkdir</span><span class="token plain"> /scratch/</span><span class="token environment constant" style="color:hsl(35, 99%, 36%)">$USER</span><span class="token plain">/examples</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ </span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">cd</span><span class="token plain"> /scratch/</span><span class="token environment constant" style="color:hsl(35, 99%, 36%)">$USER</span><span class="token plain">/examples</span><br></span></code></pre></div></div>
<p>Create <code>example.R</code> inside the examples directory:</p>
<div class="language-R language-r codeBlockContainer_MFUa theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Q7QX"><pre tabindex="0" class="prism-code language-r codeBlock_dlwf thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EajK"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">df &lt;- data.frame(x=c(1,2,3,1), y=c(7,19,2,2))</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">df</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">indices &lt;- order(df$x)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">order(df$x)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">df[indices,]</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">df[rev(order(df$y)),]</span><br></span></code></pre></div></div>
<p>Create the following SBATCH script named <code>run-R.sbatch</code> :</p>
<div class="language-bash codeBlockContainer_MFUa theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Q7QX"><pre tabindex="0" class="prism-code language-bash codeBlock_dlwf thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EajK"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token shebang important" style="color:hsl(230, 8%, 24%);font-weight:bold">#!/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --job-name=RTest</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --nodes=1</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --tasks-per-node=1</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --mem=2GB</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --time=01:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"> </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">module purge</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">module load r/intel/4.0.4</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"> </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">cd</span><span class="token plain"> /scratch/</span><span class="token environment constant" style="color:hsl(35, 99%, 36%)">$USER</span><span class="token plain">/examples</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">R --no-save </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-q</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-f</span><span class="token plain"> example.R </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> example.out </span><span class="token operator file-descriptor important" style="color:hsl(230, 8%, 24%);font-weight:bold">2</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token file-descriptor important" style="color:hsl(230, 8%, 24%);font-weight:bold">&amp;1</span><br></span></code></pre></div></div>
<p>Run the job using <code>sbatch</code>.</p>
<div class="language-sh codeBlockContainer_MFUa theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Q7QX"><pre tabindex="0" class="prism-code language-sh codeBlock_dlwf thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EajK"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ sbatch run-R.sbatch</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aKB0" id="array-jobs">Array Jobs<a href="#array-jobs" class="hash-link" aria-label="Direct link to Array Jobs" title="Direct link to Array Jobs">​</a></h2>
<p>Using job array you may submit many similar jobs with almost identical job requirement. This reduces loads on both shoulders of users and the scheduler system. Job array can only be used in batch jobs. Usually the only requirement difference among jobs in a job array is the input file or files.</p>
<p>Please follow the recipe below to try the example. There are 5 input files named <code>sample-1.txt</code>, <code>sample-2.txt</code> to <code>sample-5.txt</code> in sequential order. Running one command <code>sbatch --array=1-5 run-jobarray.s</code>, you submit 5 jobs to process each of these input files individually.</p>
<p>Prepare the data before submitting an array job:</p>
<div class="language-sh codeBlockContainer_MFUa theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Q7QX"><pre tabindex="0" class="prism-code language-sh codeBlock_dlwf thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EajK"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ </span><span class="token function" style="color:hsl(221, 87%, 60%)">mkdir</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-p</span><span class="token plain"> /scratch/</span><span class="token environment constant" style="color:hsl(35, 99%, 36%)">$USER</span><span class="token plain">/myjarraytest</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ </span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">cd</span><span class="token plain"> /scratch/</span><span class="token environment constant" style="color:hsl(35, 99%, 36%)">$USER</span><span class="token plain">/myjarraytest</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ </span><span class="token function" style="color:hsl(221, 87%, 60%)">cp</span><span class="token plain"> /share/apps/Tutorials/slurm/example/jobarray/* </span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ </span><span class="token function" style="color:hsl(221, 87%, 60%)">ls</span><br></span></code></pre></div></div>
<p>Submit the array job:</p>
<div class="language-sh codeBlockContainer_MFUa theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Q7QX"><pre tabindex="0" class="prism-code language-sh codeBlock_dlwf thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EajK"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ sbatch </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--array</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token number" style="color:hsl(35, 99%, 36%)">1</span><span class="token plain">-5 run-jobarray.s</span><br></span></code></pre></div></div>
<p>The content of the job script <code>run-jobarray.s</code> is copied below:</p>
<div class="language-bash codeBlockContainer_MFUa theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Q7QX"><pre tabindex="0" class="prism-code language-bash codeBlock_dlwf thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EajK"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token shebang important" style="color:hsl(230, 8%, 24%);font-weight:bold">#!/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --job-name=myJobarrayTest</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --nodes=1 </span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --ntasks-per-node=1</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --time=5:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --mem=1GB</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --output=wordcounts_%A_%a.out</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --error=wordcounts_%A_%a.err</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">module purge</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">module load python/intel/3.8.6</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">cd</span><span class="token plain"> /scratch/</span><span class="token environment constant" style="color:hsl(35, 99%, 36%)">$USER</span><span class="token plain">/myjarraytest</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">python wordcount.py sample-</span><span class="token variable" style="color:hsl(221, 87%, 60%)">$SLURM_ARRAY_TASK_ID</span><span class="token plain">.txt</span><br></span></code></pre></div></div>
<p>Job array submission introduces an environment variable, <code>SLURM_ARRAY_TASK_ID</code>, which is unique for each job array job. It is usually embedded somewhere so that when a job runs, its unique value is incorporated into producing a proper file name.</p>
<p>Also as shown above: two additional options <code>%A</code> and <code>%a</code>, denoting the job ID and the task ID ( i.e. job array index ) respectively, are available for specifying a job&#x27;s stdout, and stderr file names.</p>
<h2 class="anchor anchorWithStickyNavbar_aKB0" id="more-examples">More examples<a href="#more-examples" class="hash-link" aria-label="Direct link to More examples" title="Direct link to More examples">​</a></h2>
<p>You can find more examples in the slurm jobarray examples directory:</p>
<div class="language-sh codeBlockContainer_MFUa theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Q7QX"><pre tabindex="0" class="prism-code language-sh codeBlock_dlwf thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EajK"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">/scratch/work/public/examples/slurm/jobarry/</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aKB0" id="gpu-jobs">GPU Jobs<a href="#gpu-jobs" class="hash-link" aria-label="Direct link to GPU Jobs" title="Direct link to GPU Jobs">​</a></h2>
<p>To request one GPU card, use SBATCH directive in job script:</p>
<div class="language-bash codeBlockContainer_MFUa theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Q7QX"><pre tabindex="0" class="prism-code language-bash codeBlock_dlwf thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EajK"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --gres=gpu:1</span><br></span></code></pre></div></div>
<p>To request a specific card type, use eg. <code>--gres=gpu:v100:1</code>. As an example, let&#x27;s submit an Amber job. Amber is a molecular dynamics software package. The recipe is:</p>
<div class="language-sh codeBlockContainer_MFUa theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Q7QX"><pre tabindex="0" class="prism-code language-sh codeBlock_dlwf thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EajK"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ </span><span class="token function" style="color:hsl(221, 87%, 60%)">mkdir</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-p</span><span class="token plain"> /scratch/</span><span class="token environment constant" style="color:hsl(35, 99%, 36%)">$USER</span><span class="token plain">/myambertest</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ </span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">cd</span><span class="token plain"> /scratch/</span><span class="token environment constant" style="color:hsl(35, 99%, 36%)">$USER</span><span class="token plain">/myambertest</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ </span><span class="token function" style="color:hsl(221, 87%, 60%)">cp</span><span class="token plain"> /share/apps/Tutorials/slurm/example/amberGPU/* </span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ sbatch run-amber.s</span><br></span></code></pre></div></div>
<p>There are three NVIDIA GPU types and one AMD GPU type that can be used.</p>
<div class="theme-admonition theme-admonition-warning admonition_wwdC alert alert--warning"><div class="admonitionHeading_U2M0"><span class="admonitionIcon_zflM"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_NRaz"><p>AMD GPUs require code to be compatible with ROCM drivers, not CUDA</p></div></div>
<p><strong>To request NVIDIA GPUs</strong></p>
<ul>
<li>RTX8000</li>
</ul>
<div class="language-bash codeBlockContainer_MFUa theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Q7QX"><pre tabindex="0" class="prism-code language-bash codeBlock_dlwf thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EajK"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --gres=gpu:rtx8000:1</span><br></span></code></pre></div></div>
<ul>
<li>V100</li>
</ul>
<div class="language-bash codeBlockContainer_MFUa theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Q7QX"><pre tabindex="0" class="prism-code language-bash codeBlock_dlwf thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EajK"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --gres=gpu:v100:1</span><br></span></code></pre></div></div>
<ul>
<li>A100</li>
</ul>
<div class="language-bash codeBlockContainer_MFUa theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Q7QX"><pre tabindex="0" class="prism-code language-bash codeBlock_dlwf thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EajK"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --gres=gpu:a100:1</span><br></span></code></pre></div></div>
<ul>
<li>H100</li>
</ul>
<div class="language-bash codeBlockContainer_MFUa theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Q7QX"><pre tabindex="0" class="prism-code language-bash codeBlock_dlwf thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EajK"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --gres=gpu:h100:1</span><br></span></code></pre></div></div>
<p><strong>To request AMD GPUs</strong></p>
<ul>
<li>MI100</li>
</ul>
<div class="language-bash codeBlockContainer_MFUa theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Q7QX"><pre tabindex="0" class="prism-code language-bash codeBlock_dlwf thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EajK"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --gres=gpu:mi100:1</span><br></span></code></pre></div></div>
<ul>
<li>MI250</li>
</ul>
<div class="language-bash codeBlockContainer_MFUa theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Q7QX"><pre tabindex="0" class="prism-code language-bash codeBlock_dlwf thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EajK"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --gres=gpu:mi250:1</span><br></span></code></pre></div></div>
<p>From the tutorial example directory we copy over Amber input data files &quot;inpcrd&quot;, &quot;prmtop&quot; and &quot;mdin&quot;, and the job script file &quot;run-amber.s&quot;. The content of the job script &quot;run-amber.s&quot; is:</p>
<div class="language-bash codeBlockContainer_MFUa theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Q7QX"><pre tabindex="0" class="prism-code language-bash codeBlock_dlwf thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EajK"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token shebang important" style="color:hsl(230, 8%, 24%);font-weight:bold">#!/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --job-name=myAmberJobGPU</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --nodes=1</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --cpus-per-task=1</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --time=00:30:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --mem=3GB</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token comment" style="color:hsl(230, 4%, 64%)">#SBATCH --gres=gpu:1</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">module purge</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">module load amber/openmpi/intel/20.06</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">cd</span><span class="token plain"> /scratch/</span><span class="token environment constant" style="color:hsl(35, 99%, 36%)">$USER</span><span class="token plain">/myambertest</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">pmemd.cuda </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-O</span><br></span></code></pre></div></div>
<p>The demo Amber job should take ~2 minutes to finish once it starts runnning. When the job is done, several output files are generated. Check the one named &quot;mdout&quot;, which has a section most relevant here:</p>
<div class="language-sh codeBlockContainer_MFUa theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Q7QX"><pre tabindex="0" class="prism-code language-sh codeBlock_dlwf thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EajK"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain">--------------------- INFORMATION ---------------------- </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> GPU </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">CUDA</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> Version of PMEMD </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">in</span><span class="token plain"> use: NVIDIA GPU IN USE. </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain">                    Version </span><span class="token number" style="color:hsl(35, 99%, 36%)">16.0</span><span class="token plain">.0 </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain">                      02/25/2016 </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">..</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">..</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">..</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">  </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain">------------------- GPU DEVICE INFO -------------------- </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain">            CUDA_VISIBLE_DEVICES: </span><span class="token number" style="color:hsl(35, 99%, 36%)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain">   CUDA Capable Devices Detected:      </span><span class="token number" style="color:hsl(35, 99%, 36%)">1</span><span class="token plain"> </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain">           CUDA Device ID </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">in</span><span class="token plain"> use:      </span><span class="token number" style="color:hsl(35, 99%, 36%)">0</span><span class="token plain"> </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain">                CUDA Device Name: Tesla K80 </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain">     CUDA Device Global Mem Size:  </span><span class="token number" style="color:hsl(35, 99%, 36%)">11439</span><span class="token plain"> MB </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> CUDA Device Num Multiprocessors:     </span><span class="token number" style="color:hsl(35, 99%, 36%)">13</span><span class="token plain"> </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain">           CUDA Device Core Freq:   </span><span class="token number" style="color:hsl(35, 99%, 36%)">0.82</span><span class="token plain"> GHz </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain">--------------------------------------------------------</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aKB0" id="interactive-jobs">Interactive Jobs<a href="#interactive-jobs" class="hash-link" aria-label="Direct link to Interactive Jobs" title="Direct link to Interactive Jobs">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_aKB0" id="bash-sessions">Bash Sessions<a href="#bash-sessions" class="hash-link" aria-label="Direct link to Bash Sessions" title="Direct link to Bash Sessions">​</a></h3>
<p>The majority of the jobs on the NYU HPC cluster are submitted with the sbatch command, and executed in the background. These jobs&#x27; steps and workflows are predefined by users, and their executions are driven by the scheduler system.</p>
<p>There are cases when users need to run applications interactively ( <em>interactive jobs</em> ). Interactive jobs allow the users to enter commands and data on the command line (or in a graphical interface ), providing an experience similar to working on a desktop or laptop.</p>
<p>Examples of common interactive tasks are:</p>
<ul>
<li>
<p>Editing files</p>
</li>
<li>
<p>Compiling and debugging code</p>
</li>
<li>
<p>Exploring data, to insights</p>
</li>
<li>
<p>A graphical window to run visualization</p>
</li>
<li>
<p>etc</p>
</li>
</ul>
<p>To support interactive use in a batch environment, Slurm allows for interactive batch jobs.</p>
<div class="theme-admonition theme-admonition-warning admonition_wwdC alert alert--warning"><div class="admonitionHeading_U2M0"><span class="admonitionIcon_zflM"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_NRaz"><p>Please do not run interactive jobs on the HPC Login nodes.  Login nodes of the HPC cluster are shared between many users so running interactive jobs that require significant computing and IO resources on the login nodes will impact many users.  For this reason running compute and IO intensive interactive jobs on the HPC login nodes is not allowed.</p><p><strong><em>Such jobs may be removed without notice!</em></strong></p></div></div>
<div class="theme-admonition theme-admonition-tip admonition_wwdC alert alert--success"><div class="admonitionHeading_U2M0"><span class="admonitionIcon_zflM"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_NRaz"><p>Instead of running interactive jobs on Login nodes, users can run interactive jobs on the HPC Compute nodes using SLURM&#x27;s <code>srun</code> utility. Running interactive jobs on compute nodes does not impact many users and in addition provides access to resources that are not available on the login nodes, such as interactive access to GPUs, high memory, exclusive access to all the resources of a compute node, etc.</p><div class="theme-admonition theme-admonition-note admonition_wwdC alert alert--secondary"><div class="admonitionHeading_U2M0"><span class="admonitionIcon_zflM"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_NRaz"><p>There is no partition on the HPC cluster that has been reserved for Interactive jobs.</p></div></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_aKB0" id="start-an-interactive-job">Start an Interactive Job<a href="#start-an-interactive-job" class="hash-link" aria-label="Direct link to Start an Interactive Job" title="Direct link to Start an Interactive Job">​</a></h3>
<p>When you start an interactive batch job the command prompt is not immediately returned. Instead, you wait until the resource is available when the prompt is returned and you are on a compute node and in a batch job - much like the process of logging in to a host with ssh. <strong>To end the session, type &#x27;exit&#x27;</strong>, again just like the process of logging in and out with ssh.</p>
<div class="language-sh codeBlockContainer_MFUa theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Q7QX"><pre tabindex="0" class="prism-code language-sh codeBlock_dlwf thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EajK"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ srun </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--pty</span><span class="token plain"> /bin/bash</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">srun: job </span><span class="token number" style="color:hsl(35, 99%, 36%)">58699789</span><span class="token plain"> queued and waiting </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> resources</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">srun: job </span><span class="token number" style="color:hsl(35, 99%, 36%)">58699789</span><span class="token plain"> has been allocated resources</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@cm034 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ </span><span class="token function" style="color:hsl(221, 87%, 60%)">hostname</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">cm034.hpc.nyu.edu</span><br></span></code></pre></div></div>
<p>To use any GUI-based program within the interactive batch session you will need to extend X forwarding with the --x11 option. This of course still relies on you having X forwarding at your login session.  To test if you have X forwarding running, you can try running the gnuplot test as shown:</p>
<div class="language-sh codeBlockContainer_MFUa theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Q7QX"><pre tabindex="0" class="prism-code language-sh codeBlock_dlwf thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EajK"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ module load gnuplot/gcc/5.4.1</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ gnuplot</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">gnuplot</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> </span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">test</span><br></span></code></pre></div></div>
<p>If a window opens on your display with a gnuplot test window, you know that Xforwarding is working.  Please see <a href="/rts-docs-dev/pr-preview/pr-109/docs/hpc/connecting_to_hpc/ssh_tunneling_and_x11_forwarding/">SSH Tunneling and X11 Forwarding</a> for details.</p>
<h3 class="anchor anchorWithStickyNavbar_aKB0" id="request-resources">Request Resources<a href="#request-resources" class="hash-link" aria-label="Direct link to Request Resources" title="Direct link to Request Resources">​</a></h3>
<p>You can request resources for an interactive batch session just as you would for any other job, for example to request 4 processors with 4GB memory for 2 hours.</p>
<p>If you do not request resources you will get the default settings. If after some directory navigation in your interactive session, you can jump back to the directory you submitted from with:</p>
<div class="language-sh codeBlockContainer_MFUa theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Q7QX"><pre tabindex="0" class="prism-code language-sh codeBlock_dlwf thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EajK"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@cm034 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ </span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">cd</span><span class="token plain"> </span><span class="token variable" style="color:hsl(221, 87%, 60%)">$SLURM_SUBMIT_DIR</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_aKB0" id="interactive-job-options">Interactive Job Options<a href="#interactive-job-options" class="hash-link" aria-label="Direct link to Interactive Job Options" title="Direct link to Interactive Job Options">​</a></h3>
<p>(Don&#x27;t just submit the job, but also wait for it to start and connect <code>stdout</code>, <code>stderr</code> and <code>stdin</code> to the current terminal)</p>
<ul>
<li>
<p><code>-nnum</code></p>
<ul>
<li>Specify the number of tasks to run, eg. -n4. Default is one CPU core per task</li>
</ul>
</li>
<li>
<p><code>-ttime</code></p>
<ul>
<li>Request job running duration, eg. <code>-t1:30:00</code></li>
</ul>
</li>
<li>
<p><code>--mem=MB</code></p>
<ul>
<li>Specify the real memory required per node in MegaBytes, eg. <code>--mem=4000</code></li>
<li><code>--pty</code></li>
<li>Execute the first task in pseudo terminal mode, eg. <code>--pty /bin/bash</code>, to start a bash command shell</li>
</ul>
</li>
<li>
<p><code>--gres=gpu:N</code></p>
<ul>
<li>To request <code>N</code> number of GPUs</li>
</ul>
</li>
<li>
<p><code>--x11</code></p>
<ul>
<li>Enable X forwarding, so programs using a GUI can be used during the session (provided you have X forwarding to your workstation set up)</li>
<li>To leave an interactive batch session, type <code>exit</code> at the command prompt</li>
</ul>
</li>
</ul>
<p>Certain tasks need user iteraction - such as debugging and some GUI-based applications. However the HPC clusters rely on batch job scheduling to efficiently allocate resources. Interactive batch jobs allow these apparently conflicting requirements to be met.</p>
<h3 class="anchor anchorWithStickyNavbar_aKB0" id="interactive-bash-job-examples">Interactive Bash Job Examples<a href="#interactive-bash-job-examples" class="hash-link" aria-label="Direct link to Interactive Bash Job Examples" title="Direct link to Interactive Bash Job Examples">​</a></h3>
<p><strong>Example (Without x11 forwarding)</strong></p>
<p>Through <code>srun</code> SLURM provides rich command line options for users to request resources from the cluster, to allow interactive jobs. Please see some examples and short accompanying explanations in the code block below, which should cover many of the use cases.</p>
<p>In the srun examples below, through <code>--pty /bin/bash</code> we request to start bash command shell session in pseudo terminal by default the resource allocated is single CPU core and 2GB memory for 1 hour:</p>
<div class="language-sh codeBlockContainer_MFUa theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Q7QX"><pre tabindex="0" class="prism-code language-sh codeBlock_dlwf thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EajK"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ srun </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--pty</span><span class="token plain"> /bin/bash</span><br></span></code></pre></div></div>
<p>To request 4 CPU cores, 4 GB memory, and 2 hour running duration:</p>
<div class="language-sh codeBlockContainer_MFUa theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Q7QX"><pre tabindex="0" class="prism-code language-sh codeBlock_dlwf thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EajK"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ srun </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-c4</span><span class="token plain"> -t2:00:00 </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--mem</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token number" style="color:hsl(35, 99%, 36%)">4000</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--pty</span><span class="token plain"> /bin/bash</span><br></span></code></pre></div></div>
<p>To request one GPU card, 3 GB memory, and 1.5 hour running duration:</p>
<div class="language-sh codeBlockContainer_MFUa theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Q7QX"><pre tabindex="0" class="prism-code language-sh codeBlock_dlwf thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EajK"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ srun -t1:30:00 </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--mem</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token number" style="color:hsl(35, 99%, 36%)">3000</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--gres</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain">gpu:1 </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--pty</span><span class="token plain"> /bin/bash</span><br></span></code></pre></div></div>
<p><strong>Example (x11 forwarding)</strong></p>
<p>In srun there is an option &quot;–x11&quot;, which enables X forwarding, so programs using a GUI can be used during an interactive session (provided you have X forwarding to your workstation set up).</p>
<p>To request computing resources, and export x11 display on allocated node(s)</p>
<div class="language-sh codeBlockContainer_MFUa theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Q7QX"><pre tabindex="0" class="prism-code language-sh codeBlock_dlwf thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EajK"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ srun </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--x11</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-c4</span><span class="token plain"> -t2:00:00 </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--mem</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token number" style="color:hsl(35, 99%, 36%)">4000</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--pty</span><span class="token plain"> /bin/bash</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@cm034 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ module load gnuplot/gcc/5.4.1</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@cm034 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ gnuplot</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">gnuplot</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> </span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">test</span><br></span></code></pre></div></div>
<p>To request GPU card etc, and export x11 display:</p>
<div class="language-sh codeBlockContainer_MFUa theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Q7QX"><pre tabindex="0" class="prism-code language-sh codeBlock_dlwf thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EajK"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ srun </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--x11</span><span class="token plain"> -t1:30:00 </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--mem</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token number" style="color:hsl(35, 99%, 36%)">3000</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--gres</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain">gpu:1 </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--pty</span><span class="token plain"> /bin/bash</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_aKB0" id="r-interactive-job">R interactive job<a href="#r-interactive-job" class="hash-link" aria-label="Direct link to R interactive job" title="Direct link to R interactive job">​</a></h3>
<p>The following example shows how to work with Interactive R session on a compute node:</p>
<div class="language-sh codeBlockContainer_MFUa theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Q7QX"><pre tabindex="0" class="prism-code language-sh codeBlock_dlwf thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EajK"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ srun </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-c</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">1</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--pty</span><span class="token plain"> /bin/bash</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@cm034 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ module purge</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@cm034 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ module list</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">No modules loaded</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@cm034 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ module load r/gcc/4.4.0</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@cm034 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ module list</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">Currently Loaded Modules:</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token number" style="color:hsl(35, 99%, 36%)">1</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> r/intel/4.4.0</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@cm034 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ R</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">R version </span><span class="token number" style="color:hsl(35, 99%, 36%)">4.4</span><span class="token plain">.0 </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token number" style="color:hsl(35, 99%, 36%)">2024</span><span class="token plain">-04-24</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> -- </span><span class="token string" style="color:hsl(119, 34%, 47%)">&quot;Puppy Cup&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">Copyright </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">C</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">2024</span><span class="token plain"> The R Foundation </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> Statistical Computing</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">Platform: x86_64-pc-linux-gnu</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">R is </span><span class="token function" style="color:hsl(221, 87%, 60%)">free</span><span class="token plain"> software and comes with ABSOLUTELY NO WARRANTY.</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">You are welcome to redistribute it under certain conditions.</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">Type </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;license()&#x27;</span><span class="token plain"> or </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;licence()&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> distribution details.</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">R is a collaborative project with many contributors.</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">Type </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;contributors()&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">more</span><span class="token plain"> information and</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;citation()&#x27;</span><span class="token plain"> on how to cite R or R packages </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">in</span><span class="token plain"> publications.</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">Type </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;demo()&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> some demos, </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;help()&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> on-line help, or</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;help.start()&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">for</span><span class="token plain"> an HTML browser interface to help.</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">Type </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;q()&#x27;</span><span class="token plain"> to quit R.</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">5</span><span class="token plain"> + </span><span class="token number" style="color:hsl(35, 99%, 36%)">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token number" style="color:hsl(35, 99%, 36%)">1</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">15</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">6</span><span class="token plain"> ** </span><span class="token number" style="color:hsl(35, 99%, 36%)">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token number" style="color:hsl(35, 99%, 36%)">1</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">36</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> tan</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token number" style="color:hsl(35, 99%, 36%)">45</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token number" style="color:hsl(35, 99%, 36%)">1</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">1.619775</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> q</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">Save workspace image? </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">y/n/c</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">: n</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@cm034 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$ </span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">exit</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">exit</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">NetID@log-1 ~</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain">$</span><br></span></code></pre></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/NYU-ITS/rts-docs-dev/blob/main/docs/hpc/05_submitting_jobs/01_slurm_submitting_jobs.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_ut7m" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_MGsE"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/rts-docs-dev/pr-preview/pr-109/docs/hpc/datasets/working_with_datasets/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Working with Datasets</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/rts-docs-dev/pr-preview/pr-109/docs/hpc/submitting_jobs/slurm_main_commands/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Slurm: Main Commands</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_WToC thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#batch-vs-interactive-jobs" class="table-of-contents__link toc-highlight">Batch vs Interactive Jobs</a><ul><li><a href="#the-trouble-with-interactive-environments" class="table-of-contents__link toc-highlight">The trouble with interactive environments</a></li><li><a href="#where-does-the-output-go-" class="table-of-contents__link toc-highlight">Where does the output go ?</a></li><li><a href="#writing-and-submitting-a-job" class="table-of-contents__link toc-highlight">Writing and Submitting a Job</a></li><li><a href="#a-simple-example" class="table-of-contents__link toc-highlight">A simple example</a></li></ul></li><li><a href="#batch-jobs" class="table-of-contents__link toc-highlight">Batch Jobs</a><ul><li><a href="#options-to-manage-job-output" class="table-of-contents__link toc-highlight">Options to manage job output</a></li><li><a href="#options-to-set-the-job-environment" class="table-of-contents__link toc-highlight">Options to set the job environment:</a></li><li><a href="#options-to-request-compute-resources" class="table-of-contents__link toc-highlight">Options to request compute resources</a></li><li><a href="#options-for-running-interactively-on-the-compute-nodes-with-srun" class="table-of-contents__link toc-highlight">Options for running interactively on the compute nodes with srun</a></li><li><a href="#options-for-delaying-starting-a-job" class="table-of-contents__link toc-highlight">Options for delaying starting a job</a></li><li><a href="#options-for-running-many-similar-jobs" class="table-of-contents__link toc-highlight">Options for running many similar jobs</a></li></ul></li><li><a href="#r-job-example" class="table-of-contents__link toc-highlight">R Job Example</a></li><li><a href="#array-jobs" class="table-of-contents__link toc-highlight">Array Jobs</a></li><li><a href="#more-examples" class="table-of-contents__link toc-highlight">More examples</a></li><li><a href="#gpu-jobs" class="table-of-contents__link toc-highlight">GPU Jobs</a></li><li><a href="#interactive-jobs" class="table-of-contents__link toc-highlight">Interactive Jobs</a><ul><li><a href="#bash-sessions" class="table-of-contents__link toc-highlight">Bash Sessions</a></li><li><a href="#start-an-interactive-job" class="table-of-contents__link toc-highlight">Start an Interactive Job</a></li><li><a href="#request-resources" class="table-of-contents__link toc-highlight">Request Resources</a></li><li><a href="#interactive-job-options" class="table-of-contents__link toc-highlight">Interactive Job Options</a></li><li><a href="#interactive-bash-job-examples" class="table-of-contents__link toc-highlight">Interactive Bash Job Examples</a></li><li><a href="#r-interactive-job" class="table-of-contents__link toc-highlight">R interactive job</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Contact</div><ul class="footer__items clean-list"><li class="footer__item"><a href="mailto:hpc@nyu.edu" target="_blank" rel="noopener noreferrer" class="footer__link-item">Email for HPC support<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_MVl4"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="mailto:hsrn-support@nyu.edu" target="_blank" rel="noopener noreferrer" class="footer__link-item">Email for HSRN support<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_MVl4"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="mailto:genai-support@nyu.edu" target="_blank" rel="noopener noreferrer" class="footer__link-item">Email for general GenAI support<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_MVl4"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="mailto:Genai-research-support@nyu.edu" target="_blank" rel="noopener noreferrer" class="footer__link-item">Email for GenAI for research support<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_MVl4"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://guides.nyu.edu/" target="_blank" rel="noopener noreferrer" class="footer__link-item">NYU Libraries Research Guides<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_MVl4"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://sites.google.com/nyu.edu/forc-camp/home" target="_blank" rel="noopener noreferrer" class="footer__link-item">FORC camp<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_MVl4"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/rts-docs-dev/pr-preview/pr-109/blog/">Blog</a></li><li class="footer__item"><a href="https://github.com/NYU-ITS/rts-docs-dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_MVl4"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Made with 💜 in NYC!</div></div></div></footer></div>
</body>
</html>